window.Modernizr=function(e,t,n){function r(e){w.cssText=e}function a(e,t){return r(P.join(e+";")+(t||""))}function i(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var r in e){var a=e[r];if(!o(a,"-")&&w[a]!==n)return"pfx"==t?a:!0}return!1}function l(e,t,r){for(var a in e){var o=t[e[a]];if(o!==n)return r===!1?e[a]:i(o,"function")?o.bind(r||t):o}return!1}function c(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+x.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?s(a,t):(a=(e+" "+C.join(r+" ")+r).split(" "),l(a,t,n))}function u(){h.input=function(n){for(var r=0,a=n.length;a>r;r++)E[n[r]]=!!(n[r]in y);return E.list&&(E.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),E}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),h.inputtypes=function(e){for(var r,a,i,o=0,s=e.length;s>o;o++)y.setAttribute("type",a=e[o]),r="text"!==y.type,r&&(y.value=k,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(a)&&y.style.WebkitAppearance!==n?(v.appendChild(y),i=t.defaultView,r=i.getComputedStyle&&"textfield"!==i.getComputedStyle(y,null).WebkitAppearance&&0!==y.offsetHeight,v.removeChild(y)):/^(search|tel)$/.test(a)||(r=/^(url|email)$/.test(a)?y.checkValidity&&y.checkValidity()===!1:y.value!=k)),_[e[o]]=!!r;return _}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d,f,p="2.6.3",h={},m=!0,v=t.documentElement,g="modernizr",b=t.createElement(g),w=b.style,y=t.createElement("input"),k=":)",$={}.toString,P=" -webkit- -moz- -o- -ms- ".split(" "),S="Webkit Moz O ms",x=S.split(" "),C=S.toLowerCase().split(" "),A={svg:"http://www.w3.org/2000/svg"},j={},_={},E={},D=[],F=D.slice,T=function(e,n,r,a){var i,o,s,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=a?a[r]:g+(r+1),c.appendChild(s);return i=["&#173;",'<style id="s',g,'">',e,"</style>"].join(""),c.id=g,(u?c:d).innerHTML+=i,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=v.style.overflow,v.style.overflow="hidden",v.appendChild(d)),o=n(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),v.style.overflow=l),!!o},B=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return T("@media "+t+" { #"+g+" { position: absolute; } }",function(t){r="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),r},M=function(){function e(e,a){a=a||t.createElement(r[e]||"div"),e="on"+e;var o=e in a;return o||(a.setAttribute||(a=t.createElement("div")),a.setAttribute&&a.removeAttribute&&(a.setAttribute(e,""),o=i(a[e],"function"),i(a[e],"undefined")||(a[e]=n),a.removeAttribute(e))),a=null,o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),R={}.hasOwnProperty;f=i(R,"undefined")||i(R.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return R.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=F.call(arguments,1),r=function(){if(this instanceof r){var a=function(){};a.prototype=t.prototype;var i=new a,o=t.apply(i,n.concat(F.call(arguments)));return Object(o)===o?o:i}return t.apply(e,n.concat(F.call(arguments)))};return r}),j.flexbox=function(){return c("flexWrap")},j.flexboxlegacy=function(){return c("boxDirection")},j.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},j.canvastext=function(){return!(!h.canvas||!i(t.createElement("canvas").getContext("2d").fillText,"function"))},j.webgl=function(){return!!e.WebGLRenderingContext},j.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",P.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},j.geolocation=function(){return"geolocation"in navigator},j.postmessage=function(){return!!e.postMessage},j.websqldatabase=function(){return!!e.openDatabase},j.indexedDB=function(){return!!c("indexedDB",e)},j.hashchange=function(){return M("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},j.history=function(){return!(!e.history||!history.pushState)},j.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},j.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},j.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),o(w.backgroundColor,"rgba")},j.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),o(w.backgroundColor,"rgba")||o(w.backgroundColor,"hsla")},j.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(w.background)},j.backgroundsize=function(){return c("backgroundSize")},j.borderimage=function(){return c("borderImage")},j.borderradius=function(){return c("borderRadius")},j.boxshadow=function(){return c("boxShadow")},j.textshadow=function(){return""===t.createElement("div").style.textShadow},j.opacity=function(){return a("opacity:.55"),/^0.55$/.test(w.opacity)},j.cssanimations=function(){return c("animationName")},j.csscolumns=function(){return c("columnCount")},j.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+P.join(n+e)).slice(0,-e.length)),o(w.backgroundImage,"gradient")},j.cssreflections=function(){return c("boxReflect")},j.csstransforms=function(){return!!c("transform")},j.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in v.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},j.csstransitions=function(){return c("transition")},j.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var a=t.getElementById("smodernizr"),i=a.sheet||a.styleSheet,o=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(o)&&0===o.indexOf(r.split(" ")[0])}),e},j.generatedcontent=function(){var e;return T(["#",g,"{font:0/0 a}#",g,':after{content:"',k,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},j.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},j.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n},j.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(e){return!1}},j.sessionstorage=function(){try{return sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch(e){return!1}},j.webworkers=function(){return!!e.Worker},j.applicationcache=function(){return!!e.applicationCache},j.svg=function(){return!!t.createElementNS&&!!t.createElementNS(A.svg,"svg").createSVGRect},j.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==A.svg},j.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test($.call(t.createElementNS(A.svg,"animate")))},j.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test($.call(t.createElementNS(A.svg,"clipPath")))};for(var O in j)f(j,O)&&(d=O.toLowerCase(),h[d]=j[O](),D.push((h[d]?"":"no-")+d));return h.input||u(),h.addTest=function(e,t){if("object"==typeof e)for(var r in e)f(e,r)&&h.addTest(r,e[r]);else{if(e=e.toLowerCase(),h[e]!==n)return h;t="function"==typeof t?t():t,m!==n&&m&&(v.className+=" "+(t?"":"no-")+e),h[e]=t}return h},r(""),b=y=null,function(e,t){function r(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function a(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=g[e[m]];return t||(t={},v++,e[m]=v,g[v]=t),t}function o(e,n,r){if(n||(n=t),d)return n.createElement(e);r||(r=i(n));var a;return a=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),a.canHaveChildren&&!p.test(e)?r.frag.appendChild(a):a}function s(e,n){if(e||(e=t),d)return e.createDocumentFragment();n=n||i(e);for(var r=n.frag.cloneNode(),o=0,s=a(),l=s.length;l>o;o++)r.createElement(s[o]);return r}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return b.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(b,t.frag)}function c(e){e||(e=t);var n=i(e);return!b.shivCSS||u||n.hasCSS||(n.hasCSS=!!r(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),d||l(e,n),e}var u,d,f=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,g={};(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return e.cloneNode===n||e.createDocumentFragment===n||e.createElement===n}()}catch(r){u=!0,d=!0}})();var b={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:d,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:c,createElement:o,createDocumentFragment:s};e.html5=b,c(t)}(this,t),h._version=p,h._prefixes=P,h._domPrefixes=C,h._cssomPrefixes=x,h.mq=B,h.hasEvent=M,h.testProp=function(e){return s([e])},h.testAllProps=c,h.testStyles=T,h.prefixed=function(e,t,n){return t?c(e,t,n):c(e,"pfx")},v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+D.join(" "):""),h}(this,this.document),function(){function e(e,t,n){for(var r=(n||0)-1,a=e?e.length:0;a>++r;)if(e[r]===t)return r;return-1}function t(t,n){var r=typeof n;if(t=t.cache,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var a="number"==r?n:g+n;return t=(t=t[r])&&t[a],"object"==r?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:g+e,a=t[n]||(t[n]={});"object"==n?(a[r]||(a[r]=[])).push(e):a[r]=!0}}function r(e){return e.charCodeAt(0)}function a(e,t){for(var n=e.criteria,r=t.criteria,a=-1,i=n.length;i>++a;){var o=n[a],s=r[a];if(o!==s){if(o>s||o===p)return 1;if(s>o||s===p)return-1}}return e.index-t.index}function i(e){var t=-1,r=e.length,a=e[0],i=e[0|r/2],o=e[r-1];if(a&&"object"==typeof a&&i&&"object"==typeof i&&o&&"object"==typeof o)return!1;var s=l();s["false"]=s["null"]=s["true"]=s.undefined=!1;var c=l();for(c.array=e,c.cache=s,c.push=n;r>++t;)c.push(e[t]);return c}function o(e){return"\\"+Q[e]}function s(){return h.pop()||[]}function l(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(e){e.length=0,w>h.length&&h.push(e)}function u(e){var t=e.cache;t&&u(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,w>m.length&&m.push(e)}function d(e,t,n){t||(t=0),n===p&&(n=e?e.length:0);for(var r=-1,a=n-t||0,i=Array(0>a?0:a);a>++r;)i[r]=e[t+r];return i}function f(n){function h(e){return e&&"object"==typeof e&&!Zr(e)&&Br.call(e,"__wrapped__")?e:new m(e)}function m(e,t){this.__chain__=!!t,this.__wrapped__=e}function w(e){function t(){if(r){var e=d(r);Mr.apply(e,arguments)}if(this instanceof t){var i=V(n.prototype),o=n.apply(i,e||arguments);return Et(o)?o:i}return n.apply(a,e||arguments)}var n=e[0],r=e[2],a=e[4];return Gr(t,e),t}function Q(e,t,n,r,a){if(n){var i=n(e);if(i!==p)return i}var o=Et(e);if(!o)return e;var l=Ar.call(e);if(!q[l])return e;var u=Vr[l];switch(l){case R:case O:return new u(+e);case U:case K:return new u(e);case W:return i=u(e.source,x.exec(e)),i.lastIndex=e.lastIndex,i}var f=Zr(e);if(t){var h=!r;r||(r=s()),a||(a=s());for(var m=r.length;m--;)if(r[m]==e)return a[m];i=f?u(e.length):{}}else i=f?d(e):ia({},e);return f&&(Br.call(e,"index")&&(i.index=e.index),Br.call(e,"input")&&(i.input=e.input)),t?(r.push(e),a.push(i),(f?Yt:la)(e,function(e,o){i[o]=Q(e,t,n,r,a)}),h&&(c(r),c(a)),i):i}function V(e){return Et(e)?Nr(e):{}}function Y(e,t,n){if("function"!=typeof e)return Zn;if(t===p||!("prototype"in e))return e;var r=e.__bindData__;if(r===p&&(Yr.funcNames&&(r=!e.name),r=r||!Yr.funcDecomp,!r)){var a=Fr.call(e);Yr.funcNames||(r=!C.test(a)),r||(r=E.test(a),Gr(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)}}return Mn(e,t)}function G(e){function t(){var e=l?o:this;if(a){var h=d(a);Mr.apply(h,arguments)}if((i||u)&&(h||(h=d(arguments)),i&&Mr.apply(h,i),u&&s>h.length))return r|=16,G([n,f?r:-4&r,h,null,o,s]);if(h||(h=arguments),c&&(n=e[p]),this instanceof t){e=V(n.prototype);var m=n.apply(e,h);return Et(m)?m:e}return n.apply(e,h)}var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],l=1&r,c=2&r,u=4&r,f=8&r,p=n;return Gr(t,e),t}function Z(n,r){var a=-1,o=lt(),s=n?n.length:0,l=s>=b&&o===e,c=[];if(l){var d=i(r);d?(o=t,r=d):l=!1}for(;s>++a;){var f=n[a];0>o(r,f)&&c.push(f)}return l&&u(r),c}function et(e,t,n,r){for(var a=(r||0)-1,i=e?e.length:0,o=[];i>++a;){var s=e[a];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Zr(s)||ft(s))){t||(s=et(s,t,n));var l=-1,c=s.length,u=o.length;for(o.length+=c;c>++l;)o[u++]=s[l]}else n||o.push(s)}return o}function tt(e,t,n,r,a,i){if(n){var o=n(e,t);if(o!==p)return!!o}if(e===t)return 0!==e||1/e==1/t;var l=typeof e,u=typeof t;if(!(e!==e||e&&z[l]||t&&z[u]))return!1;if(null==e||null==t)return e===t;var d=Ar.call(e),f=Ar.call(t);if(d==B&&(d=N),f==B&&(f=N),d!=f)return!1;switch(d){case R:case O:return+e==+t;case U:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case W:case K:return e==$r(t)}var h=d==M;if(!h){var m=Br.call(e,"__wrapped__"),v=Br.call(t,"__wrapped__");if(m||v)return tt(m?e.__wrapped__:e,v?t.__wrapped__:t,n,r,a,i);if(d!=N)return!1;var g=e.constructor,b=t.constructor;if(g!=b&&!(_t(g)&&g instanceof g&&_t(b)&&b instanceof b)&&"constructor"in e&&"constructor"in t)return!1}var w=!a;a||(a=s()),i||(i=s());for(var y=a.length;y--;)if(a[y]==e)return i[y]==t;var k=0;if(o=!0,a.push(e),i.push(t),h){if(y=e.length,k=t.length,o=k==y,o||r)for(;k--;){var $=y,P=t[k];if(r)for(;$--&&!(o=tt(e[$],P,n,r,a,i)););else if(!(o=tt(e[k],P,n,r,a,i)))break}}else sa(t,function(t,s,l){return Br.call(l,s)?(k++,o=Br.call(e,s)&&tt(e[s],t,n,r,a,i)):p}),o&&!r&&sa(e,function(e,t,n){return Br.call(n,t)?o=--k>-1:p});return a.pop(),i.pop(),w&&(c(a),c(i)),o}function nt(e,t,n,r,a){(Zr(t)?Yt:la)(t,function(t,i){var o,s,l=t,c=e[i];if(t&&((s=Zr(t))||ca(t))){for(var u=r.length;u--;)if(o=r[u]==t){c=a[u];break}if(!o){var d;n&&(l=n(c,t),(d=l!==p)&&(c=l)),d||(c=s?Zr(c)?c:[]:ca(c)?c:{}),r.push(t),a.push(c),d||nt(c,t,n,r,a)}}else n&&(l=n(c,t),l===p&&(l=t)),l!==p&&(c=l);e[i]=c})}function rt(e,t){return e+Dr(Hr()*(t-e+1))}function at(n,r,a){var o=-1,l=lt(),d=n?n.length:0,f=[],p=!r&&d>=b&&l===e,h=a||p?s():f;if(p){var m=i(h);l=t,h=m}for(;d>++o;){var v=n[o],g=a?a(v,o,n):v;(r?!o||h[h.length-1]!==g:0>l(h,g))&&((a||p)&&h.push(g),f.push(v))}return p?(c(h.array),u(h)):a&&c(h),f}function it(e){return function(t,n,r){var a={};n=h.createCallback(n,r,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i;){var s=t[i];e(a,s,n(s,i,t),t)}else la(t,function(t,r,i){e(a,t,n(t,r,i),i)});return a}}function ot(e,t,n,r,a,i){var o=1&t,s=2&t,l=4&t,c=16&t,u=32&t;if(!s&&!_t(e))throw new Pr;c&&!n.length&&(t&=-17,c=n=!1),u&&!r.length&&(t&=-33,u=r=!1);var f=e&&e.__bindData__;if(f&&f!==!0)return f=d(f),f[2]&&(f[2]=d(f[2])),f[3]&&(f[3]=d(f[3])),!o||1&f[1]||(f[4]=a),!o&&1&f[1]&&(t|=8),!l||4&f[1]||(f[5]=i),c&&Mr.apply(f[2]||(f[2]=[]),n),u&&Ir.apply(f[3]||(f[3]=[]),r),f[1]|=t,ot.apply(null,f);var p=1==t||17===t?w:G;return p([e,t,n,r,a,i])}function st(e){return ta[e]}function lt(){var t=(t=h.indexOf)===bn?e:t;return t}function ct(e){return"function"==typeof e&&jr.test(e)}function ut(e){var t,n;return e&&Ar.call(e)==N&&(t=e.constructor,!_t(t)||t instanceof t)?(sa(e,function(e,t){n=t}),n===p||Br.call(e,n)):!1}function dt(e){return na[e]}function ft(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ar.call(e)==B||!1}function pt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),Q(e,t,"function"==typeof n&&Y(n,r,1))}function ht(e,t,n){return Q(e,!0,"function"==typeof t&&Y(t,n,1))}function mt(e,t){var n=V(e);return t?ia(n,t):n}function vt(e,t,n){var r;return t=h.createCallback(t,n,3),la(e,function(e,n,a){return t(e,n,a)?(r=n,!1):p}),r}function gt(e,t,n){var r;return t=h.createCallback(t,n,3),wt(e,function(e,n,a){return t(e,n,a)?(r=n,!1):p}),r}function bt(e,t,n){var r=[];sa(e,function(e,t){r.push(t,e)});var a=r.length;for(t=Y(t,n,3);a--&&t(r[a--],r[a],e)!==!1;);return e}function wt(e,t,n){var r=ea(e),a=r.length;for(t=Y(t,n,3);a--;){var i=r[a];if(t(e[i],i,e)===!1)break}return e}function yt(e){var t=[];return sa(e,function(e,n){_t(e)&&t.push(n)}),t.sort()}function kt(e,t){return e?Br.call(e,t):!1}function $t(e){for(var t=-1,n=ea(e),r=n.length,a={};r>++t;){var i=n[t];a[e[i]]=i}return a}function Pt(e){return e===!0||e===!1||e&&"object"==typeof e&&Ar.call(e)==R||!1}function St(e){return e&&"object"==typeof e&&Ar.call(e)==O||!1}function xt(e){return e&&1===e.nodeType||!1}function Ct(e){var t=!0;if(!e)return t;var n=Ar.call(e),r=e.length;return n==M||n==K||n==B||n==N&&"number"==typeof r&&_t(e.splice)?!r:(la(e,function(){return t=!1}),t)}function At(e,t,n,r){return tt(e,t,"function"==typeof n&&Y(n,r,2))}function jt(e){return Kr(e)&&!qr(parseFloat(e))}function _t(e){return"function"==typeof e}function Et(e){return!(!e||!z[typeof e])}function Dt(e){return Tt(e)&&e!=+e}function Ft(e){return null===e}function Tt(e){return"number"==typeof e||e&&"object"==typeof e&&Ar.call(e)==U||!1}function Bt(e){return e&&"object"==typeof e&&Ar.call(e)==W||!1}function Mt(e){return"string"==typeof e||e&&"object"==typeof e&&Ar.call(e)==K||!1}function Rt(e){return e===p}function Ot(e,t,n){var r={};return t=h.createCallback(t,n,3),la(e,function(e,n,a){r[n]=t(e,n,a)}),r}function It(e){var t=arguments,n=2;if(!Et(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=Y(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var a=d(arguments,1,n),i=-1,o=s(),l=s();n>++i;)nt(e,a[i],r,o,l);return c(o),c(l),e}function Ut(e,t,n){var r={};if("function"!=typeof t){var a=[];sa(e,function(e,t){a.push(t)}),a=Z(a,et(arguments,!0,!1,1));for(var i=-1,o=a.length;o>++i;){var s=a[i];r[s]=e[s]}}else t=h.createCallback(t,n,3),sa(e,function(e,n,a){t(e,n,a)||(r[n]=e)});return r}function Nt(e){for(var t=-1,n=ea(e),r=n.length,a=hr(r);r>++t;){var i=n[t];a[t]=[i,e[i]]}return a}function Wt(e,t,n){var r={};if("function"!=typeof t)for(var a=-1,i=et(arguments,!0,!1,1),o=Et(e)?i.length:0;o>++a;){var s=i[a];s in e&&(r[s]=e[s])}else t=h.createCallback(t,n,3),sa(e,function(e,n,a){t(e,n,a)&&(r[n]=e)});return r}function Kt(e,t,n,r){var a=Zr(e);if(null==n)if(a)n=[];else{var i=e&&e.constructor,o=i&&i.prototype;n=V(o)}return t&&(t=h.createCallback(t,r,4),(a?Yt:la)(e,function(e,r,a){return t(n,e,r,a)})),n}function qt(e){for(var t=-1,n=ea(e),r=n.length,a=hr(r);r>++t;)a[t]=e[n[t]];return a}function Lt(e){for(var t=arguments,n=-1,r=et(t,!0,!1,1),a=t[2]&&t[2][t[1]]===e?1:r.length,i=hr(a);a>++n;)i[n]=e[r[n]];return i}function Jt(e,t,n){var r=-1,a=lt(),i=e?e.length:0,o=!1;return n=(0>n?Jr(0,i+n):n)||0,Zr(e)?o=a(e,t,n)>-1:"number"==typeof i?o=(Mt(e)?e.indexOf(t,n):a(e,t,n))>-1:la(e,function(e){return++r>=n?!(o=e===t):p}),o}function zt(e,t,n){var r=!0;t=h.createCallback(t,n,3);var a=-1,i=e?e.length:0;if("number"==typeof i)for(;i>++a&&(r=!!t(e[a],a,e)););else la(e,function(e,n,a){return r=!!t(e,n,a)});return r}function Qt(e,t,n){var r=[];t=h.createCallback(t,n,3);var a=-1,i=e?e.length:0;if("number"==typeof i)for(;i>++a;){var o=e[a];t(o,a,e)&&r.push(o)}else la(e,function(e,n,a){t(e,n,a)&&r.push(e)});return r}function Ht(e,t,n){t=h.createCallback(t,n,3);var r=-1,a=e?e.length:0;if("number"!=typeof a){var i;return la(e,function(e,n,r){return t(e,n,r)?(i=e,!1):p}),i}for(;a>++r;){var o=e[r];if(t(o,r,e))return o}}function Vt(e,t,n){var r;return t=h.createCallback(t,n,3),Gt(e,function(e,n,a){return t(e,n,a)?(r=e,!1):p}),r}function Yt(e,t,n){var r=-1,a=e?e.length:0;if(t=t&&n===p?t:Y(t,n,3),"number"==typeof a)for(;a>++r&&t(e[r],r,e)!==!1;);else la(e,t);return e}function Gt(e,t,n){var r=e?e.length:0;if(t=t&&n===p?t:Y(t,n,3),"number"==typeof r)for(;r--&&t(e[r],r,e)!==!1;);else{var a=ea(e);r=a.length,la(e,function(e,n,i){return n=a?a[--r]:--r,t(i[n],n,i)})}return e}function Zt(e,t){var n=d(arguments,2),r=-1,a="function"==typeof t,i=e?e.length:0,o=hr("number"==typeof i?i:0);return Yt(e,function(e){o[++r]=(a?t:e[t]).apply(e,n)}),o}function Xt(e,t,n){var r=-1,a=e?e.length:0;if(t=h.createCallback(t,n,3),"number"==typeof a)for(var i=hr(a);a>++r;)i[r]=t(e[r],r,e);else i=[],la(e,function(e,n,a){i[++r]=t(e,n,a)});return i}function en(e,t,n){var a=-1/0,i=a;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Zr(e))for(var o=-1,s=e.length;s>++o;){var l=e[o];l>i&&(i=l)}else t=null==t&&Mt(e)?r:h.createCallback(t,n,3),Yt(e,function(e,n,r){var o=t(e,n,r);o>a&&(a=o,i=e)});return i}function tn(e,t,n){var a=1/0,i=a;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Zr(e))for(var o=-1,s=e.length;s>++o;){var l=e[o];i>l&&(i=l)}else t=null==t&&Mt(e)?r:h.createCallback(t,n,3),Yt(e,function(e,n,r){var o=t(e,n,r);a>o&&(a=o,i=e)});return i}function nn(e,t,n,r){if(!e)return n;var a=3>arguments.length;t=h.createCallback(t,r,4);var i=-1,o=e.length;if("number"==typeof o)for(a&&(n=e[++i]);o>++i;)n=t(n,e[i],i,e);else la(e,function(e,r,i){n=a?(a=!1,e):t(n,e,r,i)});return n}function rn(e,t,n,r){var a=3>arguments.length;return t=h.createCallback(t,r,4),Gt(e,function(e,r,i){n=a?(a=!1,e):t(n,e,r,i)}),n}function an(e,t,n){return t=h.createCallback(t,n,3),Qt(e,function(e,n,r){return!t(e,n,r)})}function on(e,t,n){if(e&&"number"!=typeof e.length&&(e=qt(e)),null==t||n)return e?e[rt(0,e.length-1)]:p;var r=sn(e);return r.length=zr(Jr(0,t),r.length),r}function sn(e){var t=-1,n=e?e.length:0,r=hr("number"==typeof n?n:0);return Yt(e,function(e){var n=rt(0,++t);r[t]=r[n],r[n]=e}),r}function ln(e){var t=e?e.length:0;return"number"==typeof t?t:ea(e).length}function cn(e,t,n){var r;t=h.createCallback(t,n,3);var a=-1,i=e?e.length:0;if("number"==typeof i)for(;i>++a&&!(r=t(e[a],a,e)););else la(e,function(e,n,a){return!(r=t(e,n,a))});return!!r}function un(e,t,n){var r=-1,i=Zr(t),o=e?e.length:0,d=hr("number"==typeof o?o:0);for(i||(t=h.createCallback(t,n,3)),Yt(e,function(e,n,a){var o=d[++r]=l();i?o.criteria=Xt(t,function(t){return e[t]}):(o.criteria=s())[0]=t(e,n,a),o.index=r,o.value=e}),o=d.length,d.sort(a);o--;){var f=d[o];d[o]=f.value,i||c(f.criteria),u(f)}return d}function dn(e){return e&&"number"==typeof e.length?d(e):qt(e)}function fn(e){for(var t=-1,n=e?e.length:0,r=[];n>++t;){var a=e[t];a&&r.push(a)}return r}function pn(e){return Z(e,et(arguments,!0,!0,1))}function hn(e,t,n){var r=-1,a=e?e.length:0;for(t=h.createCallback(t,n,3);a>++r;)if(t(e[r],r,e))return r;return-1}function mn(e,t,n){var r=e?e.length:0;for(t=h.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function vn(e,t,n){var r=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var i=-1;for(t=h.createCallback(t,n,3);a>++i&&t(e[i],i,e);)r++}else if(r=t,null==r||n)return e?e[0]:p;return d(e,0,zr(Jr(0,r),a))}function gn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Xt(e,n,r)),et(e,t)}function bn(t,n,r){if("number"==typeof r){var a=t?t.length:0;r=0>r?Jr(0,a+r):r||0}else if(r){var i=An(t,n);return t[i]===n?i:-1}return e(t,n,r)}function wn(e,t,n){var r=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var i=a;for(t=h.createCallback(t,n,3);i--&&t(e[i],i,e);)r++}else r=null==t||n?1:t||r;return d(e,0,zr(Jr(0,a-r),a))}function yn(){for(var n=[],r=-1,a=arguments.length,o=s(),l=lt(),d=l===e,f=s();a>++r;){var p=arguments[r];(Zr(p)||ft(p))&&(n.push(p),o.push(d&&p.length>=b&&i(r?n[r]:f)))}var h=n[0],m=-1,v=h?h.length:0,g=[];e:for(;v>++m;){var w=o[0];if(p=h[m],0>(w?t(w,p):l(f,p))){for(r=a,(w||f).push(p);--r;)if(w=o[r],0>(w?t(w,p):l(n[r],p)))continue e;g.push(p)}}for(;a--;)w=o[a],w&&u(w);return c(o),c(f),g}function kn(e,t,n){var r=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var i=a;for(t=h.createCallback(t,n,3);i--&&t(e[i],i,e);)r++}else if(r=t,null==r||n)return e?e[a-1]:p;return d(e,Jr(0,a-r))}function $n(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Jr(0,r+n):zr(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Pn(e){for(var t=arguments,n=0,r=t.length,a=e?e.length:0;r>++n;)for(var i=-1,o=t[n];a>++i;)e[i]===o&&(Or.call(e,i--,1),a--);return e}function Sn(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,a=Jr(0,_r((t-e)/(n||1))),i=hr(a);a>++r;)i[r]=e,e+=n;return i}function xn(e,t,n){var r=-1,a=e?e.length:0,i=[];for(t=h.createCallback(t,n,3);a>++r;){var o=e[r];t(o,r,e)&&(i.push(o),Or.call(e,r--,1),a--)}return i}function Cn(e,t,n){if("number"!=typeof t&&null!=t){var r=0,a=-1,i=e?e.length:0;for(t=h.createCallback(t,n,3);i>++a&&t(e[a],a,e);)r++}else r=null==t||n?1:Jr(0,t);return d(e,r)}function An(e,t,n,r){var a=0,i=e?e.length:a;for(n=n?h.createCallback(n,r,1):Zn,t=n(t);i>a;){var o=a+i>>>1;t>n(e[o])?a=o+1:i=o}return a}function jn(){return at(et(arguments,!0,!0))}function _n(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=h.createCallback(n,r,3)),at(e,t,n)}function En(e){return Z(e,d(arguments,1))}function Dn(){for(var e=-1,t=arguments.length;t>++e;){var n=arguments[e];if(Zr(n)||ft(n))var r=r?at(Z(r,n).concat(Z(n,r))):n}return r||[]}function Fn(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?en(pa(e,"length")):0,r=hr(0>n?0:n);n>++t;)r[t]=pa(e,t);return r}function Tn(e,t){var n=-1,r=e?e.length:0,a={};for(t||!r||Zr(e[0])||(t=[]);r>++n;){var i=e[n];t?a[i]=t[n]:i&&(a[i[0]]=i[1])}return a}function Bn(e,t){if(!_t(t))throw new Pr;return function(){return 1>--e?t.apply(this,arguments):p}}function Mn(e,t){return arguments.length>2?ot(e,17,d(arguments,2),null,t):ot(e,1,null,null,t)}function Rn(e){for(var t=arguments.length>1?et(arguments,!0,!1,1):yt(e),n=-1,r=t.length;r>++n;){var a=t[n];e[a]=ot(e[a],1,null,null,e)}return e}function On(e,t){return arguments.length>2?ot(t,19,d(arguments,2),null,e):ot(t,3,null,null,e)}function In(){for(var e=arguments,t=e.length;t--;)if(!_t(e[t]))throw new Pr;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Un(e,t){return t="number"==typeof t?t:+t||e.length,ot(e,4,null,null,null,t)}function Nn(e,t,n){var r,a,i,o,s,l,c,u=0,d=!1,f=!0;if(!_t(e))throw new Pr;if(t=Jr(0,t)||0,n===!0){var h=!0;f=!1}else Et(n)&&(h=n.leading,d="maxWait"in n&&(Jr(t,n.maxWait)||0),f="trailing"in n?n.trailing:f);var m=function(){var n=t-(ma()-o);if(0>=n){a&&Er(a);var d=c;a=l=c=p,d&&(u=ma(),i=e.apply(s,r),l||a||(r=s=null))}else l=Rr(m,n)},v=function(){l&&Er(l),a=l=c=p,(f||d!==t)&&(u=ma(),i=e.apply(s,r),l||a||(r=s=null))};return function(){if(r=arguments,o=ma(),s=this,c=f&&(l||!h),d===!1)var n=h&&!l;else{a||h||(u=o);var p=d-(o-u),g=0>=p;g?(a&&(a=Er(a)),u=o,i=e.apply(s,r)):a||(a=Rr(v,p))}return g&&l?l=Er(l):l||t===d||(l=Rr(m,t)),n&&(g=!0,i=e.apply(s,r)),!g||l||a||(r=s=null),i}}function Wn(e){if(!_t(e))throw new Pr;var t=d(arguments,1);return Rr(function(){e.apply(p,t)},1)}function Kn(e,t){if(!_t(e))throw new Pr;var n=d(arguments,2);return Rr(function(){e.apply(p,n)},t)}function qn(e,t){if(!_t(e))throw new Pr;var n=function(){var r=n.cache,a=t?t.apply(this,arguments):g+arguments[0];return Br.call(r,a)?r[a]:r[a]=e.apply(this,arguments)};return n.cache={},n}function Ln(e){var t,n;if(!_t(e))throw new Pr;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Jn(e){return ot(e,16,d(arguments,1))}function zn(e){return ot(e,32,null,d(arguments,1))}function Qn(e,t,n){var r=!0,a=!0;if(!_t(e))throw new Pr;return n===!1?r=!1:Et(n)&&(r="leading"in n?n.leading:r,a="trailing"in n?n.trailing:a),L.leading=r,L.maxWait=t,L.trailing=a,Nn(e,t,L)}function Hn(e,t){return ot(t,16,[e])}function Vn(e){return function(){return e}}function Yn(e,t,n){var r=typeof e;if(null==e||"function"==r)return Y(e,t,n);if("object"!=r)return nr(e);var a=ea(e),i=a[0],o=e[i];return 1!=a.length||o!==o||Et(o)?function(t){for(var n=a.length,r=!1;n--&&(r=tt(t[a[n]],e[a[n]],null,!0)););return r}:function(e){var t=e[i];return o===t&&(0!==o||1/o==1/t)}}function Gn(e){return null==e?"":$r(e).replace(aa,st)}function Zn(e){return e}function Xn(e,t,n){var r=!0,a=t&&yt(t);t&&(n||a.length)||(null==n&&(n=t),i=m,t=e,e=h,a=yt(t)),n===!1?r=!1:Et(n)&&"chain"in n&&(r=n.chain);var i=e,o=_t(i);Yt(a,function(n){var a=e[n]=t[n];o&&(i.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,o=[n];Mr.apply(o,arguments);var s=a.apply(e,o);if(r||t){if(n===s&&Et(s))return this;s=new i(s),s.__chain__=t}return s})})}function er(){return n._=Cr,this}function tr(){}function nr(e){return function(t){return t[e]}}function rr(e,t,n){var r=null==e,a=null==t;if(null==n&&("boolean"==typeof e&&a?(n=e,e=1):a||"boolean"!=typeof t||(n=t,a=!0)),r&&a&&(t=1),e=+e||0,a?(t=e,e=0):t=+t||0,n||e%1||t%1){var i=Hr();return zr(e+i*(t-e+parseFloat("1e-"+((i+"").length-1))),t)}return rt(e,t)}function ar(e,t){if(e){var n=e[t];return _t(n)?e[t]():n}}function ir(e,t,n){var r=h.templateSettings;e=$r(e||""),n=oa({},n,r);var a,i=oa({},n.imports,r.imports),s=ea(i),l=qt(i),c=0,u=n.interpolate||_,d="__p += '",f=kr((n.escape||_).source+"|"+u.source+"|"+(u===A?S:_).source+"|"+(n.evaluate||_).source+"|$","g");e.replace(f,function(t,n,r,i,s,l){return r||(r=i),d+=e.slice(c,l).replace(D,o),n&&(d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var m=n.variable,v=m;v||(m="obj",d="with ("+m+") {\n"+d+"\n}\n"),d=(a?d.replace(k,""):d).replace($,"$1").replace(P,"$1;"),d="function("+m+") {\n"+(v?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+T++ +"]")+"\n*/";try{var b=gr(s,"return "+d+g).apply(p,l)}catch(w){throw w.source=d,w}return t?b(t):(b.source=d,b)}function or(e,t,n){e=(e=+e)>-1?e:0;var r=-1,a=hr(e);for(t=Y(t,n,1);e>++r;)a[r]=t(r);return a}function sr(e){return null==e?"":$r(e).replace(ra,dt)}function lr(e){var t=++v;return $r(null==e?"":e)+t}function cr(e){return e=new m(e),e.__chain__=!0,e
}function ur(e,t){return t(e),e}function dr(){return this.__chain__=!0,this}function fr(){return $r(this.__wrapped__)}function pr(){return this.__wrapped__}n=n?X.defaults(H.Object(),n,X.pick(H,F)):H;var hr=n.Array,mr=n.Boolean,vr=n.Date,gr=n.Function,br=n.Math,wr=n.Number,yr=n.Object,kr=n.RegExp,$r=n.String,Pr=n.TypeError,Sr=[],xr=yr.prototype,Cr=n._,Ar=xr.toString,jr=kr("^"+$r(Ar).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),_r=br.ceil,Er=n.clearTimeout,Dr=br.floor,Fr=gr.prototype.toString,Tr=ct(Tr=yr.getPrototypeOf)&&Tr,Br=xr.hasOwnProperty,Mr=Sr.push,Rr=n.setTimeout,Or=Sr.splice,Ir=Sr.unshift,Ur=function(){try{var e={},t=ct(t=yr.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Nr=ct(Nr=yr.create)&&Nr,Wr=ct(Wr=hr.isArray)&&Wr,Kr=n.isFinite,qr=n.isNaN,Lr=ct(Lr=yr.keys)&&Lr,Jr=br.max,zr=br.min,Qr=n.parseInt,Hr=br.random,Vr={};Vr[M]=hr,Vr[R]=mr,Vr[O]=vr,Vr[I]=gr,Vr[N]=yr,Vr[U]=wr,Vr[W]=kr,Vr[K]=$r,m.prototype=h.prototype;var Yr=h.support={};Yr.funcDecomp=!ct(n.WinRTError)&&E.test(f),Yr.funcNames="string"==typeof gr.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:A,variable:"",imports:{_:h}},Nr||(V=function(){function e(){}return function(t){if(Et(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}());var Gr=Ur?function(e,t){J.value=t,Ur(e,"__bindData__",J)}:tr,Zr=Wr||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ar.call(e)==M||!1},Xr=function(e){var t,n=e,r=[];if(!n)return r;if(!z[typeof e])return r;for(t in n)Br.call(n,t)&&r.push(t);return r},ea=Lr?function(e){return Et(e)?Lr(e):[]}:Xr,ta={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},na=$t(ta),ra=kr("("+ea(na).join("|")+")","g"),aa=kr("["+ea(ta).join("")+"]","g"),ia=function(e,t,n){var r,a=e,i=a;if(!a)return i;var o=arguments,s=0,l="number"==typeof n?2:o.length;if(l>3&&"function"==typeof o[l-2])var c=Y(o[--l-1],o[l--],2);else l>2&&"function"==typeof o[l-1]&&(c=o[--l]);for(;l>++s;)if(a=o[s],a&&z[typeof a])for(var u=-1,d=z[typeof a]&&ea(a),f=d?d.length:0;f>++u;)r=d[u],i[r]=c?c(i[r],a[r]):a[r];return i},oa=function(e,t,n){var r,a=e,i=a;if(!a)return i;for(var o=arguments,s=0,l="number"==typeof n?2:o.length;l>++s;)if(a=o[s],a&&z[typeof a])for(var c=-1,u=z[typeof a]&&ea(a),d=u?u.length:0;d>++c;)r=u[c],i[r]===p&&(i[r]=a[r]);return i},sa=function(e,t,n){var r,a=e,i=a;if(!a)return i;if(!z[typeof a])return i;t=t&&n===p?t:Y(t,n,3);for(r in a)if(t(a[r],r,e)===!1)return i;return i},la=function(e,t,n){var r,a=e,i=a;if(!a)return i;if(!z[typeof a])return i;t=t&&n===p?t:Y(t,n,3);for(var o=-1,s=z[typeof a]&&ea(a),l=s?s.length:0;l>++o;)if(r=s[o],t(a[r],r,e)===!1)return i;return i},ca=Tr?function(e){if(!e||Ar.call(e)!=N)return!1;var t=e.valueOf,n=ct(t)&&(n=Tr(t))&&Tr(n);return n?e==n||Tr(e)==n:ut(e)}:ut,ua=it(function(e,t,n){Br.call(e,n)?e[n]++:e[n]=1}),da=it(function(e,t,n){(Br.call(e,n)?e[n]:e[n]=[]).push(t)}),fa=it(function(e,t,n){e[n]=t}),pa=Xt,ha=Qt,ma=ct(ma=vr.now)&&ma||function(){return(new vr).getTime()},va=8==Qr(y+"08")?Qr:function(e,t){return Qr(Mt(e)?e.replace(j,""):e,t||0)};return h.after=Bn,h.assign=ia,h.at=Lt,h.bind=Mn,h.bindAll=Rn,h.bindKey=On,h.chain=cr,h.compact=fn,h.compose=In,h.constant=Vn,h.countBy=ua,h.create=mt,h.createCallback=Yn,h.curry=Un,h.debounce=Nn,h.defaults=oa,h.defer=Wn,h.delay=Kn,h.difference=pn,h.filter=Qt,h.flatten=gn,h.forEach=Yt,h.forEachRight=Gt,h.forIn=sa,h.forInRight=bt,h.forOwn=la,h.forOwnRight=wt,h.functions=yt,h.groupBy=da,h.indexBy=fa,h.initial=wn,h.intersection=yn,h.invert=$t,h.invoke=Zt,h.keys=ea,h.map=Xt,h.mapValues=Ot,h.max=en,h.memoize=qn,h.merge=It,h.min=tn,h.omit=Ut,h.once=Ln,h.pairs=Nt,h.partial=Jn,h.partialRight=zn,h.pick=Wt,h.pluck=pa,h.property=nr,h.pull=Pn,h.range=Sn,h.reject=an,h.remove=xn,h.rest=Cn,h.shuffle=sn,h.sortBy=un,h.tap=ur,h.throttle=Qn,h.times=or,h.toArray=dn,h.transform=Kt,h.union=jn,h.uniq=_n,h.values=qt,h.where=ha,h.without=En,h.wrap=Hn,h.xor=Dn,h.zip=Fn,h.zipObject=Tn,h.collect=Xt,h.drop=Cn,h.each=Yt,h.eachRight=Gt,h.extend=ia,h.methods=yt,h.object=Tn,h.select=Qt,h.tail=Cn,h.unique=_n,h.unzip=Fn,Xn(h),h.clone=pt,h.cloneDeep=ht,h.contains=Jt,h.escape=Gn,h.every=zt,h.find=Ht,h.findIndex=hn,h.findKey=vt,h.findLast=Vt,h.findLastIndex=mn,h.findLastKey=gt,h.has=kt,h.identity=Zn,h.indexOf=bn,h.isArguments=ft,h.isArray=Zr,h.isBoolean=Pt,h.isDate=St,h.isElement=xt,h.isEmpty=Ct,h.isEqual=At,h.isFinite=jt,h.isFunction=_t,h.isNaN=Dt,h.isNull=Ft,h.isNumber=Tt,h.isObject=Et,h.isPlainObject=ca,h.isRegExp=Bt,h.isString=Mt,h.isUndefined=Rt,h.lastIndexOf=$n,h.mixin=Xn,h.noConflict=er,h.noop=tr,h.now=ma,h.parseInt=va,h.random=rr,h.reduce=nn,h.reduceRight=rn,h.result=ar,h.runInContext=f,h.size=ln,h.some=cn,h.sortedIndex=An,h.template=ir,h.unescape=sr,h.uniqueId=lr,h.all=zt,h.any=cn,h.detect=Ht,h.findWhere=Ht,h.foldl=nn,h.foldr=rn,h.include=Jt,h.inject=nn,Xn(function(){var e={};return la(h,function(t,n){h.prototype[n]||(e[n]=t)}),e}(),!1),h.first=vn,h.last=kn,h.sample=on,h.take=vn,h.head=vn,la(h,function(e,t){var n="sample"!==t;h.prototype[t]||(h.prototype[t]=function(t,r){var a=this.__chain__,i=e(this.__wrapped__,t,r);return a||null!=t&&(!r||n&&"function"==typeof t)?new m(i,a):i})}),h.VERSION="2.4.1",h.prototype.chain=dr,h.prototype.toString=fr,h.prototype.value=pr,h.prototype.valueOf=pr,Yt(["join","pop","shift"],function(e){var t=Sr[e];h.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new m(n,e):n}}),Yt(["push","reverse","sort","unshift"],function(e){var t=Sr[e];h.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Yt(["concat","slice","splice"],function(e){var t=Sr[e];h.prototype[e]=function(){return new m(t.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var p,h=[],m=[],v=0,g=+new Date+"",b=75,w=40,y=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",k=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,S=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,x=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,A=/<%=([\s\S]+?)%>/g,j=RegExp("^["+y+"]*0+(?=.$)"),_=/($^)/,E=/\bthis\b/,D=/['\n\r\t\u2028\u2029\\]/g,F=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],T=0,B="[object Arguments]",M="[object Array]",R="[object Boolean]",O="[object Date]",I="[object Function]",U="[object Number]",N="[object Object]",W="[object RegExp]",K="[object String]",q={};q[I]=!1,q[B]=q[M]=q[R]=q[O]=q[U]=q[N]=q[W]=q[K]=!0;var L={leading:!1,maxWait:0,trailing:!1},J={configurable:!1,enumerable:!1,value:null,writable:!1},z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Q={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=z[typeof window]&&window||this,V=z[typeof exports]&&exports&&!exports.nodeType&&exports,Y=z[typeof module]&&module&&!module.nodeType&&module,G=Y&&Y.exports===V&&V,Z=z[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(H=Z);var X=f();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=X,define(function(){return X})):V&&Y?G?(Y.exports=X)._=X:V._=X:H._=X}.call(this),function(e,t,n){"use strict";function r(e,t){return S(new(S(function(){},{prototype:e})),t)}function a(e){return P(arguments,function(t){t!==e&&P(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function i(e,t){var n=[];for(var r in e.path)if(""!==e.path[r]){if(!t.path[r])break;n.push(e.path[r])}return n}function o(e,t,n,r){var a,o=i(n,r),s={},l=[];for(var c in o)if(o[c].params&&o[c].params.length){a=o[c].params;for(var u in a)l.indexOf(a[u])>=0||(l.push(a[u]),s[a[u]]=e[a[u]])}return S({},s,t)}function s(e,t){var r=1,i=2,o={},s=[],l=o,c=S(e.when(o),{$$promises:o,$$values:o});this.study=function(o){function u(e,n){if(h[n]!==i){if(p.push(n),h[n]===r)throw p.splice(0,p.indexOf(n)),Error("Cyclic dependency: "+p.join(" -> "));if(h[n]=r,y(e))f.push(n,[function(){return t.get(n)}],s);else{var a=t.annotate(e);P(a,function(e){e!==n&&o.hasOwnProperty(e)&&u(o[e],e)}),f.push(n,e,a)}p.pop(),h[n]=i}}function d(e){return k(e)&&e.then&&e.$$promises}if(!k(o))throw Error("'invocables' must be an object");var f=[],p=[],h={};return P(o,u),o=p=h=null,function(r,i,o){function s(){--w||(y||a(g,i.$$values),m.$$values=g,m.$$promises=!0,h.resolve(g))}function u(e){m.$$failure=e,h.reject(e)}function p(n,a,i){function l(e){d.reject(e),u(e)}function c(){if(!b(m.$$failure))try{d.resolve(t.invoke(a,o,g)),d.promise.then(function(e){g[n]=e,s()},l)}catch(e){l(e)}}var d=e.defer(),f=0;P(i,function(e){v.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(f++,v[e].then(function(t){g[e]=t,--f||c()},l))}),f||c(),v[n]=d.promise}if(d(r)&&o===n&&(o=i,i=r,r=null),r){if(!k(r))throw Error("'locals' must be an object")}else r=l;if(i){if(!d(i))throw Error("'parent' must be a promise returned by $resolve.resolve()")}else i=c;var h=e.defer(),m=h.promise,v=m.$$promises={},g=S({},r),w=1+f.length/3,y=!1;if(b(i.$$failure))return u(i.$$failure),m;i.$$values?(y=a(g,i.$$values),s()):(S(v,i.$$promises),i.then(s,u));for(var $=0,x=f.length;x>$;$+=3)r.hasOwnProperty(f[$])?s():p(f[$],f[$+1],f[$+2]);return m}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function l(e,t,n){this.fromConfig=function(e,t,n){return b(e.template)?this.fromString(e.template,t):b(e.templateUrl)?this.fromUrl(e.templateUrl,t):b(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return w(e)?e(t):e},this.fromUrl=function(n,r){return w(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function c(e){function t(t){if(!/^\w+(-+\w+)*$/.test(t))throw Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(i[t])throw Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");i[t]=!0,c.push(t)}function n(e){return e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var r,a=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,i={},o="^",s=0,l=this.segments=[],c=this.params=[];this.source=e;for(var u,d,f;(r=a.exec(e))&&(u=r[2]||r[3],d=r[4]||("*"==r[1]?".*":"[^/]*"),f=e.substring(s,r.index),!(f.indexOf("?")>=0));)o+=n(f)+"("+d+")",t(u),l.push(f),s=a.lastIndex;f=e.substring(s);var p=f.indexOf("?");if(p>=0){var h=this.sourceSearch=f.substring(p);f=f.substring(0,p),this.sourcePath=e.substring(0,s+p),P(h.substring(1).split(/[&?]/),t)}else this.sourcePath=e,this.sourceSearch="";o+=n(f)+"$",l.push(f),this.regexp=RegExp(o),this.prefix=l[0]}function u(){this.compile=function(e){return new c(e)},this.isMatcher=function(e){return k(e)&&w(e.exec)&&w(e.format)&&w(e.concat)},this.$get=function(){return this}}function d(e){function t(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function n(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function r(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return b(r)?r:!0}var a=[],i=null;this.rule=function(e){if(!w(e))throw Error("'rule' must be a function");return a.push(e),this},this.otherwise=function(e){if(y(e)){var t=e;e=function(){return t}}else if(!w(e))throw Error("'rule' must be a function");return i=e,this},this.when=function(a,i){var o,s=y(i);if(y(a)&&(a=e.compile(a)),!s&&!w(i)&&!$(i))throw Error("invalid 'handler' in when()");var l={matcher:function(t,n){return s&&(o=e.compile(n),n=["$match",function(e){return o.format(e)}]),S(function(e,a){return r(e,n,t.exec(a.path(),a.search()))},{prefix:y(t.prefix)?t.prefix:""})},regex:function(e,a){if(e.global||e.sticky)throw Error("when() RegExp must not be global or sticky");return s&&(o=a,a=["$match",function(e){return n(o,e)}]),S(function(t,n){return r(t,a,e.exec(n.path()))},{prefix:t(e)})}},c={matcher:e.isMatcher(a),regex:a instanceof RegExp};for(var u in c)if(c[u])return this.rule(l[u](a,i));throw Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(e,t,n){function r(){function t(t){var r=t(n,e);return r?(y(r)&&e.replace().url(r),!0):!1}var r,o=a.length;for(r=0;o>r;r++)if(t(a[r]))return;i&&t(i)}return t.$on("$locationChangeSuccess",r),{}}]}function f(e,t,a){function i(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function s(e,t){var r=y(e),a=r?e:e.name,o=i(a);if(o){if(!t)throw Error("No reference point given for path '"+a+"'");for(var s=a.split("."),l=0,c=s.length,u=t;c>l;l++)if(""!==s[l]||0!==l){if("^"!==s[l])break;if(!u.parent)throw Error("Path '"+a+"' not valid for state '"+t.name+"'");u=u.parent}else u=t;s=s.slice(l).join("."),a=u.name+(u.name&&s?".":"")+s}var d=v[a];return!d||!r&&(r||d!==e&&d.self!==e)?n:d}function l(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!y(n)||n.indexOf("@")>=0)throw Error("State must have a valid name");if(v[n])throw Error("State '"+n+"'' is already defined");for(var a in g)t[a]=g[a](t);return v[n]=t,!t["abstract"]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){m.$current.navigable==t&&f(e,n)||m.transitionTo(t,e,!1)}]),t}function c(e,t){return k(e)?t=e:t.name=e,l(t),this}function u(e,t,i,l,c,u,v){function g(e,n,r,a,o){var s=r?n:p(e.params,n),l={$stateParams:s};o.resolve=c.resolve(e.resolve,l,o.resolve,e);var u=[o.resolve.then(function(e){o.globals=e})];return a&&u.push(a),P(e.views,function(t,n){var r=t.resolve&&t.resolve!==e.resolve?t.resolve:{};r.$template=[function(){return i.load(n,{view:t,locals:l,params:s,notify:!1})||""}],u.push(c.resolve(r,l,o.resolve,e).then(function(r){r.$$controller=t.controller,r.$$state=e,o[n]=r}))}),t.all(u).then(function(){return o})}var w=t.reject(Error("transition superseded")),y=t.reject(Error("transition prevented"));return h.locals={resolve:null,globals:{$stateParams:{}}},m={params:{},current:h.self,$current:h,transition:null},m.go=function(e,t,n){return this.transitionTo(e,t,S({inherit:!0,relative:m.$current},n))},m.transitionTo=function(n,a,i){b(i)||(i=i===!0||i===!1?{location:i}:{}),a=a||{},i=S({location:!0,inherit:!1,relative:null},i);var c=s(n,i.relative);if(!b(c)){if(i.relative)throw Error("Could not resolve '"+n+"' from state '"+i.relative+"'");throw Error("No such state '"+n+"'")}if(c["abstract"])throw Error("Cannot transition to abstract state '"+n+"'");i.inherit&&(a=o(u,a||{},m.$current,c)),n=c;var p,k,$=n.path,P=m.$current,C=m.params,A=P.path,j=h.locals,_=[];for(p=0,k=$[p];k&&k===A[p]&&f(a,C,k.ownParams);p++,k=$[p])j=_[p]=k.locals;if(n===P&&j===P.locals)return m.transition=null,t.when(m.current);a=d(n.params,a||{});var E=e.$broadcast("$stateChangeStart",n.self,a,P.self,C);if(E.defaultPrevented)return y;for(var D=t.when(j),F=p;$.length>F;F++,k=$[F])j=_[F]=r(j),D=g(k,a,k===n,D,j);var T=m.transition=D.then(function(){var t,r,o;if(m.transition!==T)return w;for(t=A.length-1;t>=p;t--)o=A[t],o.self.onExit&&l.invoke(o.self.onExit,o.self,o.locals.globals),o.locals=null;for(t=p;$.length>t;t++)r=$[t],r.locals=_[t],r.self.onEnter&&l.invoke(r.self.onEnter,r.self,r.locals.globals);m.$current=n,m.current=n.self,m.params=a,x(m.params,u),m.transition=null;var s=n.navigable;return i.location&&s&&v.url(s.url.format(s.locals.globals.$stateParams)),e.$broadcast("$stateChangeSuccess",n.self,a,P.self,C),m.current},function(r){return m.transition!==T?w:(m.transition=null,e.$broadcast("$stateChangeError",n.self,a,P.self,C,r),t.reject(r))});return T},m.is=function(e){var t=s(e);return b(t)?m.$current===t:n},m.includes=function(e){var t=s(e);return b(t)?b(m.$current.includes[t.name]):n},m.href=function(e,t,n){n=S({lossy:!0,inherit:!1,relative:m.$current},n||{});var r=s(e,n.relative);if(!b(r))return null;t=o(u,t||{},m.$current,r);var i=r&&n.lossy?r.navigable:r,l=i&&i.url?i.url.format(d(r.params,t||{})):null;return!a.html5Mode()&&l?"#"+l:l},m.get=function(e){var t=s(e);return t&&t.self?t.self:null},m}function d(e,t){var n={};return P(e,function(e){var r=t[e];n[e]=null!=r?r+"":null}),n}function f(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var a=0;n.length>a;a++){var i=n[a];if(e[i]!=t[i])return!1}return!0}function p(e,t){var n={};return P(e,function(e){n[e]=t[e]}),n}var h,m,v={},g={parent:function(e){if(b(e.parent)&&e.parent)return s(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?s(t[1]):h},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=S({},e.parent.data,e.data)),e.data},url:function(e){var n=e.url;if(y(n))return"^"==n.charAt(0)?t.compile(n.substring(1)):(e.parent.navigable||h).url.concat(n);if(t.isMatcher(n)||null==n)return n;throw Error("Invalid url '"+n+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},params:function(e){if(!e.params)return e.url?e.url.parameters():e.parent.params;if(!$(e.params))throw Error("Invalid params in state '"+e+"'");if(e.url)throw Error("Both params and url specicified in state '"+e+"'");return e.params},views:function(e){var t={};return P(b(e.views)?e.views:{"":e},function(n,r){0>r.indexOf("@")&&(r+="@"+e.parent.name),t[r]=n}),t},ownParams:function(e){if(!e.parent)return e.params;var t={};P(e.params,function(e){t[e]=!0}),P(e.parent.params,function(n){if(!t[n])throw Error("Missing required parameter '"+n+"' in state '"+e.name+"'");t[n]=!1});var n=[];return P(t,function(e,t){e&&n.push(t)}),n},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?S({},e.parent.includes):{};return t[e.name]=!0,t}};h=l({name:"",url:"^",views:null,"abstract":!0}),h.navigable=null,this.state=c,this.$get=u,u.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter"]}function p(){function e(e,t){return{load:function(n,r){var a,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=S(i,r),r.view&&(a=t.fromConfig(r.view,r.params,r.locals)),a&&r.notify&&e.$broadcast("$viewContentLoading",r),a}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function h(e,r,a,i,o){var s=!1,l=o.has("$animate")?o.get("$animate"):null,c=function(e){return{"true":{leave:function(e){l.leave(e)},enter:function(e,t){l.enter(e,null,t)}},"false":{leave:function(e){e.remove()},enter:function(e,t){t.after(e)}}}[""+(l&&e)]},u={restrict:"ECA",compile:function(o,l){var d=o.html(),f=!0,p=t.element(document.createComment(" ui-view "));return o.prepend(p),function(t){function h(){g&&(c(!0).leave(g),g=null),v&&(v.$destroy(),v=null)}function m(s){var l=e.$current&&e.$current.locals[w],u=c(s);if(f&&(f=!1,o.replaceWith(p)),!l)return h(),g=o.clone(),g.html(d),u.enter(g,p),v=t.$new(),r(g.contents())(v),n;if(l!==b){h(),g=o.clone(),g.html(l.$template?l.$template:d),u.enter(g,p),g.data("$uiView",$),b=l,$.state=l.$$state;var m=r(g.contents());if(v=t.$new(),l.$$controller){l.$scope=v;var k=a(l.$$controller,l);g.children().data("$ngControllerController",k)}m(v),v.$emit("$viewContentLoaded"),y&&v.$eval(y),i()}}var v,g,b,w=l[u.name]||l.name||"",y=l.onload||"",k=o.parent().inheritedData("$uiView");0>w.indexOf("@")&&(w=w+"@"+(k?k.state.name:""));var $={name:w,state:null},P=function(){if(!s){s=!0;try{m(!0)}catch(e){throw s=!1,e}s=!1}};t.$on("$stateChangeSuccess",P),t.$on("$viewContentLoading",P),m(!1)}}};return u}function m(e){var t=e.match(/^([^(]+?)\s*(\((.*)\))?$/);if(!t||4!==t.length)throw Error("Invalid state ref '"+e+"'");return{state:t[1],paramExpr:t[3]||null}}function v(e){return{restrict:"A",link:function(t,r,a){var i=m(a.uiSref),o=null,s=e.$current,l="FORM"===r[0].nodeName,c=l?"action":"href",u=!0,d=r.parent().inheritedData("$uiView");d&&d.state&&d.state.name&&(s=d.state);var f=function(t){if(t&&(o=t),u){var a=e.href(i.state,o,{relative:s});return a?(r[0][c]=a,n):(u=!1,!1)}};i.paramExpr&&(t.$watch(i.paramExpr,function(e){e!==o&&f(e)},!0),o=t.$eval(i.paramExpr)),f(),l||r.bind("click",function(n){1!=n.which||n.ctrlKey||n.metaKey||n.shiftKey||(e.go(i.state,o,{relative:s}),t.$apply(),n.preventDefault())})}}}function g(e,t){function a(e){this.locals=e.locals.globals,this.params=this.locals.$stateParams}function i(){this.locals=null,this.params=null}function o(n,o){if(null!=o.redirectTo){var s,c=o.redirectTo;if(y(c))s=c;else{if(!w(c))throw Error("Invalid 'redirectTo' in when()");s=function(e,t){return c(e,t.path(),t.search())}}t.when(n,s)}else e.state(r(o,{parent:null,name:"route:"+encodeURIComponent(n),url:n,onEnter:a,onExit:i}));return l.push(o),this}function s(e,t,r){function a(e){return""!==e.name?e:n}var i={routes:l,params:r,current:n};return t.$on("$stateChangeStart",function(e,n,r,i){t.$broadcast("$routeChangeStart",a(n),a(i))}),t.$on("$stateChangeSuccess",function(e,n,r,o){i.current=a(n),t.$broadcast("$routeChangeSuccess",a(n),a(o)),x(r,i.params)}),t.$on("$stateChangeError",function(e,n,r,i,o,s){t.$broadcast("$routeChangeError",a(n),a(i),s)}),i}var l=[];a.$inject=["$$state"],this.when=o,this.$get=s,s.$inject=["$state","$rootScope","$routeParams"]}var b=t.isDefined,w=t.isFunction,y=t.isString,k=t.isObject,$=t.isArray,P=t.forEach,S=t.extend,x=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),s.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",s),l.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",l),c.prototype.concat=function(e){return new c(this.sourcePath+e+this.sourceSearch)},c.prototype.toString=function(){return this.source},c.prototype.exec=function(e,t){var n=this.regexp.exec(e);if(!n)return null;var r,a=this.params,i=a.length,o=this.segments.length-1,s={};if(o!==n.length-1)throw Error("Unbalanced capture group in route '"+this.source+"'");for(r=0;o>r;r++)s[a[r]]=n[r+1];for(;i>r;r++)s[a[r]]=t[a[r]];return s},c.prototype.parameters=function(){return this.params},c.prototype.format=function(e){var t=this.segments,n=this.params;if(!e)return t.join("");var r,a,i,o=t.length-1,s=n.length,l=t[0];for(r=0;o>r;r++)i=e[n[r]],null!=i&&(l+=encodeURIComponent(i)),l+=t[r+1];for(;s>r;r++)i=e[n[r]],null!=i&&(l+=(a?"&":"?")+n[r]+"="+encodeURIComponent(i),a=!0);return l},t.module("ui.router.util").provider("$urlMatcherFactory",u),d.$inject=["$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",d),f.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",f),p.$inject=[],t.module("ui.router.state").provider("$view",p),h.$inject=["$state","$compile","$controller","$anchorScroll","$injector"],t.module("ui.router.state").directive("uiView",h),v.$inject=["$state"],t.module("ui.router.state").directive("uiSref",v),g.$inject=["$stateProvider","$urlRouterProvider"],t.module("ui.router.compat").provider("$route",g).directive("ngView",h)}(window,window.angular),angular.module("app",["ui.router.compat","ngAnimate","features","facebook","three","demo","about","ParseServices","ThreeServices","ExternalDataServices","forms","FacebookPatch"]).value("$anchorScroll",angular.noop).config(["$stateProvider","$urlRouterProvider","$locationProvider","$anchorScrollProvider",function(e,t){t.otherwise("/"),e.state("code",{url:"/code",controller:"aboutController",templateUrl:"app/views/about.html"})}]).run(["ParseSDK","ExtendParseSDK","$rootScope","$state","$stateParams",function(e,t,n,r,a){n.$state=r,n.$stateParams=a,n.isViewLoading=!0,n.setLoading=function(){n.isViewLoading=!0},n.unsetLoading=function(){n.isViewLoading=!1},n.$on("$stateChangeStart",function(){n.setLoading(),console.log("state change start")}),n.$on("$stateChangeSuccess",function(){n.unsetLoading(),console.log("state change complete"),console.log(n.isViewLoading)})}]),angular.module("app").run(["$templateCache",function(e){"use strict";e.put("app/scripts/modules/directives/templates/loading.html",'<div class="loadingMessage center-align ani ani-fast tinUpIn" style="position:fixed; margin-left: -100px; left:50%; top:140px; width:180px; z-index:9999999"><div class="row-fluid black-back opacity-6 withRadius width-padding small-top-padding small-bottom-padding"><div class="pull-left loading-dark line height-med" style=width:60px></div><div class=pull-left><h4 class="machine lightest-text no-height-margin line height-med">Loading</h4></div></div></div>'),e.put("app/views/about.html",'<section class=jumbotron><h1>Welcome!</h1><p class=lead>You\'re ready to start working on your next Parse AngularJS app!</p><a ng-click=createMonster() class="btn btn-secondary">Create Monster</a><br>The New Monster ID is: {{ homeCtrl.monster.id }}</section><hr><div class=row-fluid><div class="npm packages span6"><h3><a href="https://npmjs.org/">NPM</a> Packages</h3><table class="table table-striped table-bordered table-hover table-condensed"><tbody><tr ng-repeat="(module, version) in server.data.dependencies | orderBy:module"><th><a ng-href="https://npmjs.org/package/{{ module }}">{{ module }}</a></th><td class=text-right>{{ version }}</td></tr></tbody></table></div><div class="bower packages span6"><h3><a href="http://bower.io/">Bower</a> Packages</h3><pre>\n      \n      {{ client.data.dependencies }}\n\n    </pre><table class="table table-striped table-bordered table-hover table-condensed"><tbody><tr ng-repeat="(module, version) in client.data.dependencies"><th>{{ module }}</th><td class=text-right>{{ version }}</td></tr></tbody></table></div></div>'),e.put("app/views/app-layout.html",'<div ui-view=subheader></div><div class="container med-grey-back dark-dust top-margin"><div class="med-grey-back dark-dust"><div class=row-fluid><div class="span10-90 expands-phone"><div ng-include="" src="\'app/views/leftnav.html\'"></div></div><div class="span90-10 contracts-phone light-back shadow-ninja left-dark right-dark hide-overflow"><div ui-view=panel></div></div></div></div></div>'),e.put("app/views/brandid-block.html",'<div class="row-fluid width-padding"><div class="muted white-back withShadow withRadius"><div class="row-fluid center-align"><img src=http://brandid.s3.amazonaws.com/logo.png alt="BRANDiD Logo" class=top-margin width=70px></div><div class="row-fluid width-padding small-top-padding bottom-padding machine center-align">If you found this useful, consider kicking shopping\'s ass at <a href=http://www.getbrandid.com>getbrandid.com</a></div></div></div>'),e.put("app/views/debug.html",'<div class="row-fluid center-align"><h5 class="machine bottom-margin muted">ui-router states</h5></div><pre>\n$state = {{$state.current.name}}\n$stateParams = {{$stateParams}}\n</pre>'),e.put("app/views/detail/about.list.animations.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click=transitionBack()>Back</a><h1 class="human title">Angular Animations</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-sitemap small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class=punchy>Angular Class Based Animations</h4></div></div></div><div class="row-fluid left-align muted"><span class=muted>We use <span class=bold><a href=https://github.com/brandid/animate-helpers.scss>animate-helpers.scss</a></span> which is a library we wrote that allows us to easily customise the famous <a href=https://github.com/daneden/animate.css>Animate.css</a> library for use with Angular 1.2 class based animations. Read more on that <a href=http://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html>here</a>.</span></div></div><div class=top-margin><a href=#/about class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/about.list.bootstrap.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click=transitionBack()>Back</a><h1 class="human title">Sass Bootstrap</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-twitter small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class=punchy>Sass Bootstrap 2.3.2</h4></div></div></div><div class="row-fluid left-align muted"><span class=muted>We use <a href=https://github.com/thomas-mcdonald/bootstrap-sass>sass-bootstrap</a> which is, believe it or not, Bootstrap converted to Sass.</span></div></div><div class=top-margin><a href=#/about class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/about.list.font-awesome.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click=transitionBack()>Back</a><h1 class="human title">Font Awesome</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-flag small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class=punchy>Font Awesome is Awesome</h4></div></div></div><div class="row-fluid left-align muted"><span class=muted>Anything with the word <a href="http://fortawesome.github.io/Font-Awesome/icons/">awesome</a> in its name better be pretty damn good. Luckily it is.</span></div></div><div class=top-margin><a href=#/about class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/about.list.html",'<div class=row-fluid><div class="navi-bar-title dark"><h1 class="human title">About</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class=row-fluid><h1 class="punchy muted light-text-shadow"><i class="icon icon-info-sign small-right-margin"></i></h1></div><div class="row-fluid bottom-margin"><div class="row-fluid center-align machine"><span class=muted>We love Parse and AngularJS. We hate servers.<br><br>Whilst building <a href=https://www.getbrandid.com>getbrandid.com</a> we developed some best practices around this stack, so we decided to open source it here. We even talked about it on the <a target=_blank href="http://blog.parse.com/">Parse Blog</a>.<br><br>This boilerplate is great for launching complex database enabled apps really fast. Fork it, try it out, let us know what features you want!</span></div></div></div><div class="row-fluid white-back withShadow withRadius center-align"><a ng-click=goForwardToPath(item.path) class="block row-fluid top-padding bottom-padding relative light-border-bottom white-border-top line height-med" ng-repeat="item in masterDetailCtrl.about" style=cursor:pointer><div class="span11 muted left-align"><div class=med-width-padding><div class="pull-left small-right-margin"><i class="icon {{item.icon}} icon-large small-right-margin"></i><span class="small-left-margin machine">{{item.title}}</span></div></div></div><div class="span1 muted pull-right"><i class="icon icon-chevron-right"></i></div></a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/about.list.state.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click=transitionBack()>Back</a><h1 class="human title">Angular State Manager</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-sitemap small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class=punchy>Ui-router</h4></div></div></div><div class="row-fluid left-align muted"><span class=muted>We use <span class=bold><a href=https://github.com/angular-ui/ui-router>ui-router</a></span> instead of the core Angular router because it handles application states excellently, a lot like the <a href=http://emberjs.com/api/classes/Ember.Router.html>Ember.Router</a>. This is important when building a large complex app, as you often need a better way to handle nested views, parent views and have the ability to override them depending on the application\'s state.</span></div></div><div class=top-margin><a href=#/about class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/about.list.theme.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click=transitionBack()>Back</a><h1 class="human title">BRAND<span class=lowercase>i</span>D UI Kit</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-tint small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class=punchy>Master Detail Theme + OOCSS + SASS</h4></div></div></div><div class="row-fluid left-align muted"><span class=muted>We developed a <a href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/styles/_brandid-ui.scss>UI Kit</a> that augments Twitter Bootstrap with some awesome helper classes, animations and this master-detail theme you\'re looking at now.</span><br><br><span class=muted>We subscribe to our friend <a href="http://ianstormtaylor.com/oocss-plus-sass-is-the-best-way-to-css/">Ian Storm Taylor</a>\'s philosophy of OOCSS + Sass, and our UI Kit is pretty flexible, so we hardly ever have to write ANY new classes when developing new features. This means our CSS filesize remains relatively constant.</span></div></div><div class=top-margin><a href=#/about class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/crud.detail.edit.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/crud/{{detailCtrl.current.id}}>Back</a><h1 class="human title">Edit</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-user small-right-margin"></i></h1></div></div><div id=loadingContainer class="relative row-fluid"><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class="row-fluid left-align"><form edit-monster-form="" monster-to-save=detailCtrl.current name=editForm class=form-horizontal ng-submit=saveMonster() novalidate><div class=control-group><label class=control-label for=inputEmail>Name</label><div class=controls><input style=width:97% ng-model=editedMonster.name placeholder=Email required></div></div><div class=control-group><label class=control-label for=inputPassword>Reason</label><div class=controls><input style=width:97% ng-model=editedMonster.reason required></div></div><div class=control-group><div class=controls><button type=submit ng-disabled=editForm.$invalid class="btn btn-block btn-large btn-success">Save To Parse</button></div></div></form></div></div></div><div class=row-fluid></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/crud.detail.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="goBackTo(\'demo.crud\')"><i class="icon icon-th-list small-right-margin"></i>List</a><h1 class="human title">Detail</h1><a class=navi-button-main href=#/crud/{{detailCtrl.current.id}}/edit>Edit</a></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-user small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class=row-fluid><div class="row-fluid center-align"><h4 class=punchy>Name</h4><span class="machine muted">{{detailCtrl.current.getName()}}</span></div></div></div><div class="horizontal-line full-fade top-margin bottom-margin"></div><h4 class=punchy>Reason</h4><span class="machine muted">{{detailCtrl.current.getReason()}}</span></div><div class="row-fluid top-margin"><a ng-click=destroyMonster(detailCtrl.current) class="btn btn-block btn-large btn-danger">Delete this model</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/crud.list.html",'<div class=row-fluid><div class="navi-bar-title dark"><h1 class="human title">CRUD</h1><a ng-click=createMonster() class=navi-button-main><i class="icon icon-plus"></i></a></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class=row-fluid><h1 class="human muted light-text-shadow"><i class="icon icon-cloud small-right-margin"></i></h1></div><div class="row-fluid top-margin big-bottom-margin"><div class="row-fluid center-align"><span class="muted machine">Reasons why shopping online for clothes sucks</span></div></div></div><div class="row-fluid white-back withShadow withRadius center-align"><a href=#/crud/{{item.id}} class="block row-fluid top-padding bottom-padding relative light-border-bottom white-border-top" ng-repeat="item in masterDetailCtrl.collection.models" ng-animate="{ enter: \'waveForward-enter\', leave: \'waveForward-leave\' }"><div class="span90-10 muted"><div class="row-fluid tiny-bottom-margin"><div class="span20-80 right-align"><span class="machine bold">Name:</span></div><div class="span80-20 left-align"><div class="small-left-margin machine">{{item.getName()}}</div></div></div><div class=row-fluid><div class="span20-80 right-align"><span class="machine bold">Reason:</span></div><div class="span80-20 left-align"><span class="small-left-margin machine">{{item.getReason()}}</span></div></div></div><div class="span10-90 muted center-align small-top-padding"><div class=small-top-margin><i class="icon icon-chevron-right"></i></div></div></a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/facebook.example.html",'<div class=row-fluid><div class="navi-bar-title dark"><h1 class="human title">Facebook API Wrapper</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class=row-fluid><h1 class="punchy muted light-text-shadow"><i class="icon icon-facebook small-right-margin"></i></h1></div><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><span class="muted machine">Extending the Facebook JavaScript SDK with FB.apiAngular</span></div></div></div><div class="row-fluid max-width-400 withShadow bottom-margin"><a ng-click=fbConnect() class="btn-fb btn-large"><div class=row-fluid><div class="span25-75 center-align"><h4 class="no-height-margin line height-btn"><i class="icon icon-facebook icon-large lightest-text"></i></h4></div><div class="span75-25 center-align"><span class="machine no-height-margin line normalcase height-btn lightest-text">1. Connect</span></div></div></a></div><div class="row-fluid max-width-400 withShadow bottom-margin"><a ng-click=exampleCall() class="btn-fb btn-large"><div class=row-fluid><div class="span25-75 center-align"><h4 class="no-height-margin line height-btn"><i class="icon icon-facebook icon-large lightest-text"></i></h4></div><div class="span75-25 center-align"><span class="machine no-height-margin line normalcase height-btn lightest-text">2. Send Request</span></div></div></a></div><pre>\n  $scope.facebookCtrl.fbAuthData = {{ facebookCtrl.fbAuthData }}\n\n  $scope.facebookCtrl.response = {{ facebookCtrl.response }}\n\n</pre><div class="row-fluid white-back withShadow withRadius top-margin top-padding bottom-padding width-padding"><div class="row-fluid left-align muted">So what did we do here? We made it an actual joy to work with the Facebook API.<br><br>Check out the details <a href=#/features/facebookSDK>Features > Angular Wrapper for Facebook SDK</a></div></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.cloud-code.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/features>Back</a><h1 class="human title">Angular Cloud Code Wrapper</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-cloud small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class="punchy small-bottom-margin">A Service to Wrap Parse Cloud Code Calls</h4></div></div></div><div class="row-fluid left-align muted">We really love AngularJS. However, you often hit the WTF ZONE of Angular, especially when you try to update scope variables outside of the "Angular Kingdom". Since all your data will be pulled in asynchronously from Parse, you\'ll run in to this issue pretty quickly.<br><br>So we wrote <strong><a href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/ParseCloudCodeAngular.js>ParseCloudCodeAngular</a></strong>, a simple AngularJS wrapper for the Parse.Cloud.run, saving even more boilerplate code. We\'re also using deferred promises, because they\'re awesome. This allows you to call Parse.Cloud.run, pass in any parameters, and it wraps the result in a promise <em>inside</em> the "Angular Kingdom". Here\'s an example:<em></em><br><br><pre>ParseCloudCodeAngular(\'customCloudCodeFunction\',dataToSend);</pre><br>This single line of code calls Parse.Cloud.run, passes in your data and wraps the result in an AngularJS promise.<br><br>Here\'s how it works:<br><br><strong><a href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/ParseQueryAngular.js>ParseCloudCodeAngular.js</a></strong><pre>angular.module(\'ParseServices\')\n\n.factory(\'ParseCloudCodeAngular\',[\'$q\',\'$timeout\',\'ParseQueryAngular\',function ($q, $timeout, ParseQueryAngular) { \n	return function(name,params) {\n    	return ParseQueryAngular(Parse.Cloud,{functionToCall:"run",params:[name,params]});\n  }\n}]);</pre><br>Just a simple shortcut to keep your code DRY.</div></div><div class=top-margin><a href=#/features class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.data.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/features>Back</a><h1 class="human title">AngularJS & Backbone</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-heart small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class="punchy small-bottom-margin">AngularJS + Backbone.js = <i class="icon icon-heart"></i></h4><span class=muted>AngularJS for views, Backbone for models</span></div></div></div><div class="row-fluid left-align muted">The awesome thing about the Parse Javascript SDK is that it\'s a fork of Backbone, so we can make use of the kickass Model and Collection architecture, but still use AngularJS for all UI events and views (this is where Backbone loses out to other frameworks).<br><br>The best way to stay organised is to separate each Parse Object definition into a separate file in a <strong>data</strong> folder. Each definition is a factory of an overall Angular module we have called \'ExternalDataServices\' which you\'ll see is first declared above in #2. Extending the \'ExternalDataServices\' module with new factories is easy, just leave out the square brackets. Here\'s what our folder structure looks like with this architecture.<br><br><pre>|-- app\n  |-- scripts\n    |-- modules\n      |-- data\n        // this is where all your model definitions \n        |-- Monster.js</pre>And this is what a Parse Object definition would look like:<br><br><strong><a target=_blank href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/modules/data/Monsters.js>Monsters.js</a></strong><pre>// Monster.js\n\n// reference the module we declared earlier\nangular.module(\'ExternalDataServices\')\n\n// add a factory\n.factory(\'MonsterService\', [\'ParseQueryAngular\', function(ParseQueryAngular) {\n\n  // use the extendAngular instead of just extend to gain enhanced Angular functionality\n\n  var Monster = Parse.Object.extendAngular({\n    className:"Monster",\n    setScaryMove: function(move) {\n      this.set(\'scaryMove\',move);\n      return this;\n    }\n  });\n  \n\n  // use the extendAngular instead of just extend to gain enhanced Angular functionality\n\n  var Monsters = Parse.Collection.extendAngular({\n    model: Monster,\n    loadMonstersWithMove: function(move) {\n      this.query = (new Parse.Query(Monster));\n\n      // use the enhanced load() function to fetch the collection\n      return this.load();\n    }\n  });\n\n  // Return a simple API : model or collection.\n  return {\n    model: Monster,\n    collection: Monsters\n  }\n\n}])</pre><br>Now wherever we need a Monster model or collection, like in the directive below, we can instantiate it using the MonsterService like this:<br><br><pre>// SomeDirective.js\n\n// inject the MonsterService into your directive\n\nangular.module(\'foo\',[]).directive(\'bar\',[\'MonsterService\',function(\n\n  return {\n    controller: [\'$scope\',\'$element\',\'$attrs\', function($scope, $element, $attrs) {\n\n      // new up a collection so we can use it to perform a query\n      var monsters = new MonsterService.collection;\n\n      // perform the Parse.Query\n      $scope.monsters = monsters.loadMonstersWithMove(\'fireBreath\');\n\n      // and remember its a promise, so we can add synchronous logic here with a .then()\n\n    }\n  }]\n\n}])</pre><br>A great side-effect of injecting your Parse data services only when you need it is that AngularJS\'s awesome dependency injection system knows when to remove this stuff from memory. Also, if you build your app in a modular way, in Angular 2.0 you will also be able to take advantage of lazy loading modules which will speed up the load-time of your app tremendously.</div></div><div class=top-margin><a href=#/features class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.facebook.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/features>Back</a><h1 class="human title">Parse & Facebook SDK</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-facebook-sign small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class="punchy small-bottom-margin">Use a Promise to Init Parse.FacebookUtils</h4><span class=muted>Allowing you to asynchronously Load the Parse SDK and the Facebook SDK</span></div></div></div><div class="row-fluid left-align muted">We all know that we should asynchronously load the Facebook SDK near the closing <span class=bold>body</span> tag to speed up page loads. We load the Parse SDK here too instead of in the <span class=bold>head</span>for the same reason. But if you try to<span class=bold></span>asynchronously load the <span class=bold>Parse SDK and Facebook SDK</span> you will run into the problem where Parse will try to call FB.init() at some point, and the FB object does not exist because the Facebook SDK has not yet loaded.<br><br>We developed an clever way to get around this. The key thing here is that Facebook calls a function <span class=bold>window.fbAsyncInit</span> as soon as the SDK is finished loading. We use this to resolve the <span class=bold>window.fbPromise</span>, which in turn is used to trigger <span class=bold>Parse.FacebookUtils.init()</span>. This method is flawless, and you never get any out of sync errors. Here\'s the code to define the <span class=bold>fbPromise</span>:<br><br><strong><a target=_blank href=https://github.com/brandid/parse-angular-demo/blob/master/index.html>index.html</a></strong><pre>\n\n  var fbDeferred = $.Deferred();\n  window.fbPromise = fbDeferred.promise();\n  window.fbAsyncInit = function() {\n    fbDeferred.resolve();\n  };\n\n</pre><br>... and here\'s the code to subsequently trigger the init()<br><br><strong><a target=_blank href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/ParseServices.js>ParseServices.js</a></strong><pre>\n// FACEBOOK init\nwindow.fbPromise.then(function() {\n  Parse.FacebookUtils.init({\n    appId: /*** FB APP ID ***/, \n    channelUrl: /*** HTTP://YOURDOMAIN.COM/ ***/channel.html\',\n    cookie: true, // enable cookies to allow Parse to access the session\n    xfbml: true, // parse XFBML\n    frictionlessRequests: true // recommended\n  });\n});\n</pre>Simple, elegant, highly effective.</div></div><div class=top-margin><a href=#/features class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.facebookSDK.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/features>Back</a><h1 class="human title">Facebook API Wrapper</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-facebook-sign small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius top-margin top-padding bottom-padding width-padding"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class="punchy small-bottom-margin">FB.api wrapped in an Angular Promise</h4><span class=muted>Extending the Facebook JavaScript SDK with FB.apiAngular</span></div></div></div><div class="row-fluid left-align muted">So what did we do <a href=#/facebook>here</a>? We made it an actual joy to work with the Facebook API.<br><br><span class=bold>1. Wrapped all FB.api calls in an AngularJS promise</span><br>For the same reason we need to wrap all Parse calls in an Angular promise, we need to do it with all <span class=bold>FB.api</span> calls too.<br><br>This is because <span class=bold>FB.api</span> performs requests outside the Angular kingdom. We took inspiration from our Parse wrapper and created a similar one for <span class=bold>FB.api</span>.<br><br><span class=bold>2. Extended Facebook JS SDK with FB.apiAngular</span><br>So after creating a cleanly wrapped Angular promise for <span class=bold>FB.api</span>, we gave ourselves access to it by extended the Facebook SDK with the <span class=bold>FB.apiAngular</span> method. Now, instead of calling <span class=bold>FB.api</span>, you just call <span class=bold>FB.apiAngular</span>, and you get to use the Facebook SDK with promises!<br><br><strong><a target=_blank href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/controllers/facebook-example.js>facebook-example.js</a></strong><pre>\n\n  $scope.exampleCall = function() {\n\n    FB.apiAngular(\n      \'/me/apprequests\',\n      { message: \'From the app to the user.\' },\n      \'POST\')\n\n    .then(function(data) {\n\n      alert(\'done\'); console.log(data)\n    \n    }, function(error) {\n    \n    $scope.facebookCtrl.response = error.message;\n  \n  });\n\n  }\n\n</pre><br><br>Check out <strong><a href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/FacebookAngularPatch.js>FacebookAngularPatch.js</a></strong> to see exactly how we extended the FB SDK with the FB.apiAngular method.</div></div><div class=top-margin><a href=#/features class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.html",'<div class=row-fluid><div class="navi-bar-title dark"><h1 class="human title">FEATURES</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class=row-fluid><h1 class="punchy muted light-text-shadow"><i class="icon icon-bolt small-right-margin"></i></h1></div><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><span class="muted machine">Some best practices from our <a href="http://blog.parse.com/2013/10/17/guest-post-parse-x-angular-js-boilerplate/" target=new>guest blog post</a> on Parse.com</span></div></div></div><div class="row-fluid white-back withShadow withRadius center-align"><a href={{item.path}} class="block row-fluid top-padding bottom-padding relative light-border-bottom white-border-top line height-med" ng-repeat="item in masterDetailCtrl.features" ng-animate="{ enter: \'waveForward-enter\', leave: \'waveForward-leave\' }"><div class="span11 muted left-align"><div class=med-width-padding><div class="pull-left small-right-margin"><i class="icon {{item.icon}} icon-large small-right-margin"></i><span class="small-left-margin machine">{{item.title}}</span></div></div></div><div class="span1 muted pull-right"><i class="icon icon-chevron-right"></i></div></a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.parse-sdk.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/features>Back</a><h1 class="human title">Extend Parse SDK</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-cogs small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class="punchy small-bottom-margin">Give Parse AngularJS Superpowers</h4><span class=muted>Extending Parse.Object gives all your Parse data load() and save() methods auto wrapping them in AngularJS promises</span></div></div></div><div class="row-fluid left-align muted">With the simple code below, we beefed up all our Parse objects and collections with enhanced functionality, allowing us to save and load any Parse.Object or Parse.Collection inside the AngularJS digest with finesse.<br><br><strong><a target=_blank href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/ParseServices.js>ParseServices.js</a></strong><pre>\n  Parse.Object.extendAngular = function(options) {\n    return ParseAbstractService.EnhanceObject(Parse.Object.extend(options));\n  };\n\n  Parse.Collection.extendAngular = function(options) {\n    return ParseAbstractService.EnhanceCollection(Parse.Collection.extend(options));\n  };\n</pre><br>It doesn\'t take a genius to notice that this requires something we called ParseAbstractService, which is a simple bit of code that adds the Parse.Object and Parse.Collection methods.<br><br><strong><a target=_blank href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/modules/data/_ParseObjects.js>_ParseObjects.js</a></strong><pre>angular.module(\'ExternalDataServices\',[])\n.factory(\'ParseAbstractService\', [\'ParseQueryAngular\', function(ParseQueryAngular) {\n /********\n This service provides an enhanced Parse.Object and Parse.Collection\n So we can call load and saveParse from any extending Class and have that wrapped\n within ParseQueryAngular\n **********/\n\n  var object = function(originalClass) {\n    originalClass.prototype = _.extend(originalClass.prototype,{\n      load:function() {\n        return ParseQueryAngular(this,{functionToCall:"fetch"});\n      },\n      saveParse:function(data) {\n        if (data &amp;&amp; typeof data == "object") this.set(data);\n        return ParseQueryAngular(this,{functionToCall:"save", params:[null]});\n      }\n    });\n   return originalClass;\n  }\n\n  var collection = function(originalClass){\n    originalClass.prototype = _.extend(originalClass.prototype,{\n      load:function() {\n        return ParseQueryAngular(this,{functionToCall:"fetch"});\n      }\n    });\n    return originalClass;\n  };\n\n  return {\n    EnhanceObject:object,\n    EnhanceCollection:collection\n  }\n}]);</pre><br>We can now make use of these new methods on any models or collections that extend Parse.Object.extendAngular or Parse.Collection.extendAngular, like so:<br><br><pre>// =============\n// new way using enhanced Parse.Object\n// =============\n\nvar collection = new TestCollection();\ncollection.load();</pre><br>For a clearer idea of how much more awesome this is, below is the old way:<br><br><pre>// ============\n// old way\n// ============\n\nvar collection = new TestCollection();\n\nvar defer = $q.defer();\n\n// fetch all models\ncollection.fetch({\n  success: function(result) {\n    $rootScope.$apply(function() {\n      defer.resolve(result);\n  },\n  error: function(error) {\n    $rootScope.$apply(function() {\n      defer.reject(error);\n    }\n  }\n});\n\ndefer.promise.then(function(data) {\n\n  collection = data;\n  // now, finally the collection is ready to use in AngularJS\n});</pre><br>Yuck! And you would have to repeat all that for every save or fetch!</div></div><div class=top-margin><a href=#/features class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/detail/features.list.parse.html",'<div class=row-fluid><div class="navi-bar-title dark"><a class=navi-button-prev ng-click="setAnimationClass(\'moveleft\')" href=#/features>Back</a><h1 class="human title">Parse Angular Wrapper</h1></div><div class="row-fluid width-padding top-padding bottom-padding"><div class="row-fluid center-align"><div class="row-fluid bottom-margin"><h1 class="punchy muted light-text-shadow"><i class="icon icon-cloud small-right-margin"></i></h1></div></div><div class="row-fluid white-back withShadow withRadius width-padding top-padding bottom-padding center-align"><div class=row-fluid><div class="row-fluid bottom-margin"><div class="row-fluid center-align"><h4 class="punchy small-bottom-margin">A Service to Wrap All Parse Calls</h4><span class=muted>Saving you from writing the same code over and over</span></div></div></div><div class="row-fluid left-align muted">We really love AngularJS. However, you often hit the WTF ZONE of Angular, especially when you try to update scope variables outside of the "Angular Kingdom". Since all your data will be pulled in asynchronously from Parse, you\'ll run in to this issue pretty quickly.<br><br>So we wrote <strong><a href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/ParseQueryAngular.js>ParseQueryAngular</a></strong>, a simple AngularJS wrapper for the Parse JS SDK, saving gazillions of lines of code (at least), and we\'re also using deferred promises, because they\'re awesome. This allows you to call any Parse API method on any Parse.Object, pass in any parameters, and it wraps the result in a promise <em>inside</em> the "Angular Kingdom". Here\'s an example:<em></em><br><br><pre>ParseQueryAngular(Parse.FacebookUtils,{functionToCall:"link", params:[user, "email,user_likes,publish_actions"]})</pre><br>This single line of code calls Parse.FacebookUtils.link to connect the current Parse User with their Facebook account, and passes in some parameters for permissions and wraps the result in an AngularJS promise.<br><br>If you\'re familiar with the Parse docs, you \'ll notice something magical here: there is no need to write the same old success: and error: functions every time you make an API call to Parse.<br><br>If you\'re familiar with AngularJS you\'ll also notice something magical here: the result of the API call is automatically wrapped into the AngularJS digest for use within your $scope. No need to do any<strong>$scope.$apply</strong>nonsense. Here\'s another example that we do all the time:<br><br><pre>var user = new Parse.User();\n\nuser.set(\'username\', \'spacenick\');\nuser.set(\'password\', \'sp4c3n1ck\');\nuser.set(\'email\',\'space@nick.com\');\n\nParseQueryAngular(user,{functionToCall:"signUp", params:[null]}).then(function(registeredUser) {\n\n    // since we know that the result will be inside the Angular digest, we make use of Angular\'s two-way data binding and automatically update all our views by simply updating the user object\n\n    user = registeredUser;\n\n    // we can even use it with Parse.Query\n    var query = new Parse.Query(MyObject);\n    query.include(\'myStuff\').equalTo(\'someRandom\',\'thing\');\n    return ParseQueryAngular(query);\n}).then(function(queriedObj) {\n\n    // assuming $scope.obj is used elsewhere in the app, this would update any views automatically\n    $scope.obj = queriedObj;\n\n    return queriedObj;\n}, function(error) {\n\n    // any rejected promises in the chain will be caught here\n    console.log(error);\n\n});</pre><br>Without ParseQueryAngular, doing two API calls one after the other would have been a nightmare of asynchronous spaghetti mess with lots of repetitive callback handling code. We just tamed it into a synchronous process and our AngularJS views would have been auto-updated every step of the way thanks to two-way data binding.<br><br>We also didn\'t need write any repetitive success: error: functions. This is the guts of creating a seamless Parse x Angular integration, we use this anytime we need talk to Parse. Check out the <strong><a href=https://github.com/brandid/parse-angular-demo/blob/master/client/app/scripts/services/ParseQueryAngular.js>ParseQueryAngular</a></strong> source and read the code comments on how we did this.</div></div><div class=top-margin><a href=#/features class="btn btn-block btn-secondary btn-large">Back</a></div></div><div class=row-fluid ng-include="" src="\'app/views/footer.html\'"></div></div>'),e.put("app/views/footer.html",'<div class="row-fluid big-top-margin width-padding big-bottom-margin hide-on-animate"><div class="muted white-back withShadow withRadius"><div class="row-fluid width-padding top-padding bottom-padding machine"><img src=http://brandid.s3.amazonaws.com/logo.png alt="BRANDiD Logo" style="margin-top: 3px" class="pull-left small-right-margin" width=70px> If you found this useful, consider kicking shopping\'s ass at <a href=http://www.getbrandid.com>getbrandid.com</a></div></div></div>'),e.put("app/views/header.html",'<header class="row-fluid center-align"><div class="row-fluid top-margin"><h2 class="lightest-text text-shadow human" style=text-transform:none>Parse x AngularJS Boilerplate</h2></div><div class="row-fluid small-top-margin"><iframe src="http://ghbtns.com/github-btn.html?user=brandid&repo=parse-angular-demo&type=watch&count=true" allowtransparency=true frameborder=0 scrolling=0 width=110 height=20></iframe><iframe src="http://ghbtns.com/github-btn.html?user=brandid&repo=parse-angular-demo&type=fork&count=true" allowtransparency=true frameborder=0 scrolling=0 width=95 height=20></iframe></div><div class="row-fluid top-margin small-bottom-margin max-width-600"><div class="well muted withShadow"><div class="row-fluid small-bottom-margin machine">A battle-tested boilerplate for building large, powerful, serverless apps with AngularJS and Parse, including angular wrappers for the Parse SDK, Parse Cloud Code, Facebook SDK and more.</div><div class=row-fluid><iframe allowtransparency=true frameborder=0 scrolling=no src="//platform.twitter.com/widgets/tweet_button.html?text=Pretty cool @Parseit x @AngularJS boilerplate http://brandid.github.io/parse-angular-demo by @BRANDiD" style="width:90px; height:20px"></iframe></div><hr><div class=row-fluid><div class="row-fluid machine">Follow the discussion on <a href="https://news.ycombinator.com/item?id=6567104">HackerNews</a></div></div><div class="row-fluid small-top-margin"><iframe allowtransparency=true frameborder=0 scrolling=no src="//platform.twitter.com/widgets/follow_button.html?screen_name=spacenick&size=small" style="width:200px; height:20px"></iframe><iframe allowtransparency=true frameborder=0 scrolling=no src="//platform.twitter.com/widgets/follow_button.html?screen_name=arush&size=small" style="width:200px; height:20px"></iframe></div></div></div><a href=https://github.com/brandid/parse-angular-demo><img style="position: absolute; top: 0; right: 0; border: 0" src=https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png alt="Fork me on GitHub"></a></header>'),e.put("app/views/leftnav.html",'<div ng-controller=MenuController><div class="row-fluid top-margin {{menuItem.css}}" ng-repeat="menuItem in menuCtrl.menu"><a href={{menuItem.href}} class="muted line height-btn center-align menuItem" ng-class=isActive(menuItem)><div class="row-fluid center-align dark-text text-shadow"><div class="line height-btn font-size-large"><i class="icon {{menuItem.icon}} icon-large"></i></div><div class="line height-btn row-fluid tichy"><span class="muted small machine">{{menuItem.name}}</span></div></div></a></div></div>'),e.put("app/views/master-detail.html",'<div class=row-fluid><div class="one-third light-dark-back shadow-ninja right-light inset" style="height: 1500px"><div class="row-fluid top-padding bottom-padding width-padding light-border-top light-border-bottom"><div ng-include="" src="\'app/views/brandid-block.html\'"></div></div><a ng-click=transitionTo(item.state) class="block light-back-hover width-padding row-fluid top-padding bottom-padding light-border-top light-border-bottom" ng-class=isActiveState(item.state) ng-repeat="item in masterDetailCtrl.menu"><div class="span3 center-align"><h4 class="power muted no-height-margin line height-btn"><i class="icon {{item.icon}} small-right-margin"></i></h4></div><div class=span7><h4 class="human muted no-height-margin line height-btn">{{item.title}}</h4></div><div class="span1 pull-right"><h4 class="muted no-height-margin line height-btn"><i class="icon icon-chevron-right"></i></h4></div></a><div class="row-fluid width-padding top-margin"><div ng-include="" src="\'app/views/debug.html\'"></div></div></div><div class="two-thirds relative"><div ng-class=masterDetailCtrl.animate ui-view=detail booty-shake=""></div></div></div>'),e.put("app/views/sphere.html","<p>shnuur</p><canvas id=three-scene></canvas>"),e.put("app/views/tips/crud-tips.html","<div class=row-fluid><h5 class=punchy>How To CRUD:</h5></div><pre class=\"muted white-back left-align ani flash\">\n// create\n$scope.masterDetailCtrl.collection.addComment('Joe', 'exploding feces')\n\n// update\ncurrent.set('name', 'Bob');\nParseQueryAngular(current, {functionToCall:\"save\", params:[null]});\n\n// delete\nParseQueryAngular(current, {functionToCall:\"destroy\"});\n</pre>"),e.put("app/views/tips/load-collections.html",'<div class=row-fluid><h5 class=punchy>How To Load Collections:</h5></div><pre class="muted white-back left-align ani flash">\n// get the collection from our data definitions\nvar Monsters = Monsterservice.collection;\n\n// new up a collection\n$scope.masterDetailCtrl.collection = new Monsters;\n\n// use the extended Parse SDK to load the whole collection\n$scope.masterDetailCtrl.collection.load();\n</pre>'),e.put("app/views/welcome.html","<div class=row-fluid>test</div>")
}]),angular.module("demo",["ParseServices","ExternalDataServices"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e){e.state("demo",{"abstract":!0,views:{"@":{templateUrl:"app/views/app-layout.html"},"panel@demo":{templateUrl:"app/views/master-detail.html",controller:"MasterDetailController",resolve:{monsters:["MonsterService",function(e){var t=new e.collection;return t.load()}]}}}}).state("demo.crud",{url:"/",views:{"detail@demo":{templateUrl:"app/views/detail/crud.list.html"}}}).state("demo.crud.detail",{url:"crud/{monsterId}",views:{"detail@demo":{templateUrl:"app/views/detail/crud.detail.html",controller:"DetailController"}}}).state("demo.crud.detail.edit",{url:"/edit",views:{"detail@demo":{templateUrl:"app/views/detail/crud.detail.edit.html",controller:"DetailController"}}})}]),angular.module("features",["demo","ParseServices","ExternalDataServices"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e){e.state("demo.features",{"abstract":!0}).state("demo.features.list",{url:"/features",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.html"}}}).state("demo.features.list.facebook",{url:"/facebook",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.facebook.html"}}}).state("demo.features.list.facebookSDK",{url:"/facebookSDK",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.facebookSDK.html"}}}).state("demo.features.list.parse",{url:"/parse",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.parse.html"}}}).state("demo.features.list.cloudCode",{url:"/cloud-code",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.cloud-code.html"}}}).state("demo.features.list.parseSDK",{url:"/parse-sdk",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.parse-sdk.html"}}}).state("demo.features.list.data",{url:"/data",views:{"detail@demo":{templateUrl:"app/views/detail/features.list.data.html"}}})}]),angular.module("facebook",["ParseServices","ExternalDataServices"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e){e.state("demo.facebook",{"abstract":!0,templateUrl:"app/views/app-layout.html"}).state("demo.facebook.example",{url:"/facebook",views:{"detail@demo":{templateUrl:"app/views/detail/facebook.example.html",controller:"FacebookExampleController"}}})}]),angular.module("three",["ParseServices","ExternalDataServices"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e){e.state("demo.three",{"abstract":!0,templateUrl:"app/views/app-layout.html"}).state("demo.three.sphere",{url:"/three",views:{"detail@demo":{templateUrl:"app/views/sphere.html",controller:"ThreeSphereController"}}})}]),angular.module("about",["demo","ParseServices","ExternalDataServices"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e){e.state("demo.about",{"abstract":!0}).state("demo.about.list",{url:"/about",views:{"detail@demo":{templateUrl:"app/views/detail/about.list.html"}}}).state("demo.about.list.state",{url:"/state",views:{"detail@demo":{templateUrl:"app/views/detail/about.list.state.html"}}}).state("demo.about.list.animations",{url:"/animations",views:{"detail@demo":{templateUrl:"app/views/detail/about.list.animations.html"}}}).state("demo.about.list.theme",{url:"/theme",views:{"detail@demo":{templateUrl:"app/views/detail/about.list.theme.html"}}}).state("demo.about.list.bootstrap",{url:"/bootstrap",views:{"detail@demo":{templateUrl:"app/views/detail/about.list.bootstrap.html"}}}).state("demo.about.list.fontAwesome",{url:"/font-awesome",views:{"detail@demo":{templateUrl:"app/views/detail/about.list.font-awesome.html"}}})}]),angular.module("app").directive("bootyShake",["$timeout",function(e){return{link:function(t,n){t.$on("bootyShake",function(){n.addClass("ani shake ani-fast"),e(function(){n.removeClass("ani shake ani-fast")},400)})}}}]),angular.module("forms",[]).directive("editMonsterForm",["ParseQueryAngular","$location",function(e,t){var n=function(e,t,n){e.append('<div id="'+t+'" class="important-white-back opacity-9 loading absolute top" style="width:100%; height:100%;"><div class="v-outer-container" style="height: 100%"><div class="v-inner-container"><div class="v-aligned-content big-top-margin"><span class="muted">'+n+"</span></div></div></div></div>")};return{restrict:"A",scope:{monsterToSave:"="},link:function(e,r){e.editedMonster={name:null,reason:null},e.$watch("monsterToSave.attributes.name",function(t){e.editedMonster.name=t}),e.$watch("monsterToSave.attributes.reason",function(t){e.editedMonster.reason=t}),e.saveMonster=function(){var a=$("#loadingContainer");n(a,"savingForm","Saving"),r.find("button").attr("disabled","disabled"),e.monsterToSave.setName(e.editedMonster.name),e.monsterToSave.setReason(e.editedMonster.reason),e.monsterToSave.saveParse().then(function(e){$("#savingForm").remove(),t.path("/crud/"+e.id)},function(e){alert("Error saving to Parse, check the console and network tab"),console.log(e)})}}}}]),angular.module("app").directive("viewLoading",function(){return{templateUrl:"app/scripts/modules/directives/templates/loading.html"}}),angular.module("app").controller("MenuController",["$scope","$state",function(e,t){e.menuCtrl={menu:[{name:"Parse Demo",state:"demo",activeFor:["demo","features","facebook","about"],icon:"icon-user",href:"#/"},{name:"Code",state:"code",activeFor:["code"],icon:"icon-github",href:"http://www.github.com/brandid/parse-angular-demo"}]},e.isActive=function(e){var n=t.current.name.split(".");return n=n[0],_.indexOf(e.activeFor,n)>=0?"active":void 0}}]),angular.module("demo").controller("MasterDetailController",["$rootScope","$location","$scope","$state","MonsterService","monsters",function(e,t,n,r,a,i){n.masterDetailCtrl={animate:"crossfade",collection:i,menu:[{title:"Angular Parse CRUD",icon:"icon-cloud",path:"#/",state:"demo.crud"},{title:"sphere",icon:"icon-bolt",path:"#/three",state:"demo.three.sphere"},{title:"Angular Facebook API",icon:"icon-facebook",path:"#/facebook",state:"demo.facebook.example"},{title:"Parse Features",icon:"icon-bolt",path:"#/features/",state:"demo.features.list"},{title:"Other Features",icon:"icon-info-sign",path:"#/about/",state:"demo.about.list"}],features:[{title:"Parse SDK for data, AngularJS for UI",icon:"icon-code",path:"#/features/data"},{title:"Angular Wrapper for Parse SDK",icon:"icon-cloud",path:"#/features/parse"},{title:"Angular Wrapper for Parse Cloud Code",icon:"icon-cloud",path:"#/features/cloud-code"},{title:"Angular Wrapper for Facebook SDK",icon:"icon-facebook-sign",path:"#/features/facebookSDK"},{title:"Extend Parse.Object & Parse.Collection",icon:"icon-terminal",path:"#/features/parse-sdk"},{title:"Parse SDK + Facebook SDK Load Performance",icon:"icon-time",path:"#/features/facebook"}],about:[{title:"Angular State Manager",icon:"icon-sitemap",path:"#/about/state"},{title:"Angular Animations",icon:"icon-magic",path:"#/about/animations"},{title:"BRANDiD UI Kit",icon:"icon-tint",path:"#/about/theme"},{title:"SASS Bootstrap",icon:"icon-twitter",path:"#/about/bootstrap"},{title:"Font Awesome",icon:"icon-flag",path:"#/about/font-awesome"}]},n.goBackTo=function(e){r.transitionTo(e)},n.transitionBack=function(){var e=r.current.name.split(".");e.pop();var t=e.join(".");r.transitionTo(t)},n.goForwardToPath=function(e){"#"==e.charAt(0)&&(e=e.substring(1)),t.path(e)},n.transitionTo=function(t){r.current.name.indexOf(t)>=0?e.$broadcast("bootyShake"):(e.setLoading(),n.masterDetailCtrl.animate=t.indexOf(r.current.name)>=0?"crossfade":"crossfade",r.transitionTo(t))},n.isActiveState=function(e){return r.current.name.indexOf(e)>=0?"white-back shadow-ninja right-light inset":void 0},n.createMonster=function(){var e=["Sebastian Vettel","Fernando Alonso","Kimi Raikkonen","Lewis Hamilton","Mark Webber","Nico Rosberg","Felipe Massa","Romain Grosjean","Jenson Button","Paul di Resta","Nico Hulkenberg","Adrian Sutil","Sergio Perez","Daniel Ricciardo","Jean-Eric Vergne","Pastor Maldonado","Esteban Gutierrez","Valtteri Bottas","Jules Bianchi","Charles Pic"],t=['Because what the hell is a: "through button bias cut front and centre back box pleat with hanger loop, finished with mitred button cuffs, bias cut spade chest pocket, contrast lined back yoke and curved hem." - (bensherman.com)',"Missed the returns window? Fuck you very much.","On mobile? Forget about it","They know I'm a dude, but they keep emailing me chicks shoes! WTF","I don't even wanna think about dealing with customer support or the lack thereof","I don't have to pay to try clothes on in a store, so why do I have to pay to try 2 different sizes online?","Because I know I'm gonna get screwed with the returns","Paid $80 for a shirt that doesn't fit because I lost the returns form","Because they're banking on me to screw up the returns",'"Oh sorry sir, didn\'t you read the terms? You pay return shipping and a 10% restocking fee"',"What happens if it doesn't fit?","Why pay for shipping when I can go to the mall?"],r=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*t.length);n.masterDetailCtrl.collection.addMonster(e[r],t[a]).then(function(){alert("You created a new object for: "+n.masterDetailCtrl.collection.first().get("name"))})},n.destroyMonster=function(e){e.destroyParse().then(function(){alert("Destroyed model with destroyParse()"),r.transitionTo("demo.crud")})}}]),angular.module("demo").controller("DetailController",["$rootScope","$scope","$state","$stateParams","MonsterService",function(e,t,n,r){t.detailCtrl={current:null},t.detailCtrl.current=t.masterDetailCtrl.collection.find(function(e){return e.id==r.monsterId}),t.transitionTo=function(e){n.transitionTo(e)},t.isActiveState=function(e){return e==n.current.name?"light-back":void 0}}]),angular.module("facebook").controller("FacebookExampleController",["$rootScope","$scope","$state","$stateParams","FacebookAngularPatch","ParseQueryAngular",function(e,t,n,r,a,i){t.facebookCtrl={fbAuthData:{},response:{}},Parse.User.current()&&(t.facebookCtrl.fbAuthData=Parse.User.current().get("authData")),t.fbConnect=function(){i(Parse.FacebookUtils,{functionToCall:"logIn",params:[Parse.User.current(),"user_likes"]}).then(function(e){alert("facebook connected!"),t.facebookCtrl.fbAuthData=e.get("authData")},function(e){alert("something went wrong, try again"),t.facebookCtrl.fbAuthData=e})},t.exampleCall=function(){FB.apiAngular("/me/apprequests",{message:"From the app to the user."},"POST").then(function(e){alert("FB Request Successfully Sent!"),t.facebookCtrl.response=e},function(e){alert("FB Request Unsuccessful!"),t.facebookCtrl.response=e})}}]),angular.module("three").controller("ThreeSphereController",["$scope","ThreeSphere",function(e,t){t.init()}]),angular.module("ThreeServices",[]).service("ThreeSphere",[function(){function e(){a=new THREE.PerspectiveCamera(75,o.clientWidth,o.clientHeight),r=new THREE.Scene,i=new THREE.WebGLRenderer({canvas:o}),i.setClearColor(16711935),t()}function t(){requestAnimationFrame(t),n()}function n(){i.render(r,a)}var r,a,i,o=document.getElementById("three-scene"),s={init:e,animate:t,render:n};return s}]),angular.module("ParseServices",[]).factory("ExtendParseSDK",["ParseAbstractService",function(e){Parse.Object.extendAngular=function(t){return e.EnhanceObject(Parse.Object.extend(t))},Parse.Collection.extendAngular=function(t){return e.EnhanceCollection(Parse.Collection.extend(t))}}]).factory("ParseSDK",function(){Parse.initialize("YJLkJJIZp4RLoui5mMOXpi3U76YNf2ubBWBrjivv","w0Z0tNoYpVA4WeKbpry7vdilYP2ZXLSaWtP0Xrfs"),window.fbPromise.then(function(){Parse.FacebookUtils.init({appId:481650395275919,channelUrl:"http://brandid.github.io/parse-angular-demo/channel.html",cookie:!0,xfbml:!0,frictionlessRequests:!0})})}),angular.module("ParseServices").factory("ParseQueryAngular",["$q","$timeout",function(e,t){var n=t;return function(t,r){var a="find";_.isUndefined(r)||_.isUndefined(r.functionToCall)||(a=r.functionToCall);var i=e.defer(),o=[{success:function(e){n(function(){i.resolve(e)})},error:function(e,t){n(function(){i.reject(t)})}}];return r&&r.params&&(o=r.params.concat(o)),r&&r.mergeParams&&(o[0]=_.extend(o[0],r.mergeParams)),t[a].apply(t,o),i.promise}}]),angular.module("ExternalDataServices",[]).factory("ParseAbstractService",["ParseQueryAngular",function(e){var t=function(t){return t.prototype=_.extend(t.prototype,{load:function(){return e(this,{functionToCall:"fetch"})},saveParse:function(t){return t&&"object"==typeof t&&this.set(t),e(this,{functionToCall:"save",params:[null]})}}),t},n=function(t){return t.prototype=_.extend(t.prototype,{load:function(){return e(this,{functionToCall:"fetch"})}}),t};return{EnhanceObject:t,EnhanceCollection:n}}]),angular.module("ExternalDataServices").factory("MonsterService",["ParseQueryAngular",function(e){var t=Parse.Object.extendAngular({className:"Monster",setName:function(e){return this.set("name",e),this},setReason:function(e){return this.set("reason",e),this},getName:function(){return this.get("name")},getReason:function(){return this.get("reason")},destroyParse:function(){return e(this,{functionToCall:"destroy"})}}),n=Parse.Collection.extendAngular({model:t,comparator:function(e){return-e.createdAt.getTime()},loadMonstersWithName:function(e){return this.query=new Parse.Query(t),this.query.equalTo("name",e),this.load()},addMonster:function(e,n){var r=this,a=new t;return a.setName(e),a.setReason(n),a.saveParse().then(function(e){r.add(e)})},removeMonster:function(e){if(!this.get(e))return!1;var t=this;return e.destroyParse().then(function(){t.remove(e)})}});return{model:t,collection:n}}]),angular.module("FacebookPatch",[]).factory("FacebookAngularPatch",["$q","$timeout",function(e,t){var n=function(){var n=[].splice.call(arguments,0),r=e.defer(),a=t;return window.fbPromise.then(function(){n.push(function(e){return _.isUndefined(e.error)?(a(function(){r.resolve(e)}),void 0):(a(function(){r.reject(e.error)}),void 0)}),FB.api.apply(FB,n)}),r.promise};window.fbPromise.then(function(){FB.apiAngular=n})}]);